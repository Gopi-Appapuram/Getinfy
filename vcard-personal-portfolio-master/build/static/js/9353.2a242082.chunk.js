"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9353],{44630:function(e,t,n){var i=n(29439),l=n(72791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,l.useState)(""),n=(0,i.Z)(t,2),s=n[0],a=n[1];return(0,l.useEffect)((function(){if(s){var t=setTimeout((function(){return a("")}),e);return function(){clearTimeout(t)}}}),[s]),[s,a]}},29353:function(e,t,n){n.r(t);var i=n(74165),l=n(15861),s=n(29439),a=n(72791),r=n(45402),c=n(50662),o=n(62797),u=n(92506),d=n(57689),m=n(11087),f=n(67202),p=n(75474),v=n(54110),x=n(44630),h=n(16030),j=(n(53540),n(71469)),y=n(37450),g=n(7869),b=n(80184);t.default=function(){var e,t,n={type:"",title:"",template:"",acc_unq_id:""},_=o.Ry().shape({title:o.Z_().min(2,"Sms Title must be at least 2 characters").max(100).required("Please Enter  Title"),type:o.Z_().required("Please select notification type")}),S=(0,h.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})),N=(S.unq_id,S.user_type),T=(S.acc_unq_id,S.enterAccount),k=(0,h.I0)(),E=(0,d.s0)(),C=(0,d.TH)(),Z=(0,a.useRef)(),q=(0,x.Z)(),M=(0,s.Z)(q,2),A=M[0],D=M[1],I=(0,h.v9)((function(e){var t,n;return null===(t=e.notificationsList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.notificationAccList})),w=null!==(e=C.state)&&void 0!==e&&e.mode?C.state.mode:"ADD",F=null===(t=C.state)||void 0===t?void 0:t.data,P=(0,a.useState)(),G=(0,s.Z)(P,2),J=(G[0],G[1]),z=[{name:"SMS",type:"SMS"},{name:"Email",type:"EMAIL"},{name:"Push",type:"PUSH"}];(0,a.useEffect)((function(){if(F){var e=(0,f.QH)(n,F);J(e)}}),[w]),(0,a.useEffect)((function(){k((0,j.RG)({enterAccount:T}))}),[k,T]);var L=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(t){var n,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={ntf_tp_type:t.type,ntf_tp_name:t.title,ntf_tp_info:null===t||void 0===t?void 0:t.template,ntf_status:"ACTIVE",unq_id:"GlobalMno"!==N?T:t.acc_unq_id},"ADD"!==w){e.next=9;break}return e.next=4,(0,p.cy)(n);case 4:"success"===(l=e.sent).status&&((0,v.By)("success","Created successfully "),E("/settings-menu-notifications")),"failed"===l.status&&D((0,v.ld)(l)),e.next=17;break;case 9:if("EDIT"!==w){e.next=17;break}return n.id=F.id,n.ntf_status=F.ntf_status,e.next=14,(0,p.Nl)(n);case 14:"success"===(s=e.sent).status&&((0,v.By)("success","Updated successfully "),E("/settings-menu-notifications")),"failed"===s.status&&D((0,v.ld)(s));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e,t,n,i;return"SMS"===(null===Z||void 0===Z||null===(e=Z.current)||void 0===e||null===(t=e.values)||void 0===t?void 0:t.type)?"SMS":"EMAIL"===(null===Z||void 0===Z||null===(n=Z.current)||void 0===n||null===(i=n.values)||void 0===i?void 0:i.type)?"Email":"Push"},V=[{name:"Setings"},{name:"Notification",link:"/settings-menu-notifications"},{name:"Create Template"}];return"EDIT"===w&&(V=[{name:"Setings"},{name:"Notification",link:"/settings-menu-notifications"},{name:"Edit Template"}]),(0,b.jsxs)(b.Fragment,{children:[A&&(0,b.jsx)(c.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:A}),(0,b.jsx)(y.Z,{list:V}),(0,b.jsxs)("div",{className:"mt-5",children:[(0,b.jsx)("h3",{children:"Template(SMS,Email,App)"}),(0,b.jsx)(u.J9,{initialValues:n,validationSchema:_,innerRef:Z,onSubmit:function(e,t){(0,t.setSubmitting)(!0),L(e)},children:function(e){var t=e.values,n=e.touched,i=e.errors;e.isSubmitting,e.handleSubmit;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(u.l0,{children:[(0,b.jsx)("div",{style:{backgroundColor:"#F5F5F5",padding:"15px",marginTop:"10px"},children:(0,b.jsx)(c.Yb,{children:(0,b.jsxs)(g.lG,{className:"h-full p-4",bodyClass:"h-full",children:[(0,b.jsx)("div",{className:"w-[420px]",children:(0,b.jsx)(c.xJ,{label:(0,b.jsxs)("p",{children:["Operator ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),children:(0,b.jsx)(u.gN,{name:"acc_unq_id",children:function(e){var n=e.field,i=e.form;return(0,b.jsx)(c.Ph,{isDisabled:"GlobalMno"!==N,placeholder:"Select Operator",field:n,form:i,options:I,value:"GlobalMno"!==N?null===I||void 0===I?void 0:I.filter((function(e){return e.acc_unq_id===T})):null===I||void 0===I?void 0:I.filter((function(e){return e.acc_unq_id===t.acc_unq_id})),onChange:function(e){return i.setFieldValue(n.name,e.acc_unq_id)}})}})})}),(0,b.jsx)("div",{className:"ml-2",children:(0,b.jsx)(c.xJ,{label:(0,b.jsxs)("p",{children:[" Notification Type",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.type&&n.type,errorMessage:i.type,children:(0,b.jsx)("div",{className:"flex gap-8 mt-4",children:z.map((function(e,t){return(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(u.gN,{type:"radio",autoComplete:"off",name:"type",value:"".concat(e.type),component:c.Y8}),(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:e.name})})]})}))})})}),(0,b.jsx)("div",{className:"mt-6 card md:grid grid-cols-2 gap-4  mt-6 ml-2 ",children:(0,b.jsx)(c.xJ,{label:(0,b.jsxs)("p",{children:[R()," Title",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.title&&n.title,errorMessage:i.title,children:(0,b.jsx)(u.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Title",component:c.II})})}),(0,b.jsx)("div",{style:{width:"70%"},className:"ml-2",children:(0,b.jsx)(c.xJ,{label:"Template",children:(0,b.jsx)(u.gN,{name:"template",children:function(e){var t=e.field,n=e.form;return(0,b.jsx)(r.Z,{value:t.value,onChange:function(e){return n.setFieldValue(t.name,e)}})}})})})]})})}),(0,b.jsxs)("div",{className:"mt-4 text-right flex justify-end",children:[(0,b.jsx)(m.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/settings-menu-notifications",children:(0,b.jsx)(c.zx,{className:"mx-2",variant:"solid",style:{backgroundColor:"#4D4D4D",fontStyle:"normal",fontSize:"18px"},children:"Cancel"})}),(0,b.jsx)(c.zx,{type:"submit",variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},children:"Submit for Approval"})]})]})})}})]})]})}}}]);
//# sourceMappingURL=9353.2a242082.chunk.js.map