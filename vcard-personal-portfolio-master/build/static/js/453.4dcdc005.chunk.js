"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[453],{80453:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var s=n(29439),r=n(72791),a=n(87781),c=n(93433),o=n(95273),l=n(92546),i=(0,o.oM)({name:"partnerList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,s=(0,l.Vk)(e);if(!s.selectedRows.includes(n))return{selectedRows:[].concat((0,c.Z)(s.selectedRows),(0,c.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,s=(0,l.Vk)(e);if(s.selectedRows.includes(n))return{selectedRows:s.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=i.actions,d=u.setSelectedRows,f=u.setSelectedRow,m=u.addRowItem,x=u.removeRowItem,p=(u.toggleDeleteConfirmation,u.setDeleteMode),h=i.reducer,v=n(8278),b=(0,a.UY)({state:h,data:v.ZP}),C=n(69564),g=n(7869),j=n(4942),w=n(74165),y=n(15861),A=n(50662),k=n(58617),I=(n(30948),n(16030)),N=n(23532),_=n(57689),E=n(58121),R=n.n(E),S=(n(97892),n(17425)),T=n(78820),D=n(16856),Z=n(39126),z=n(83461),V=n(54110),P=n(80184),L={ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}},F=function(e){var t=e.actionPermissions,n=(0,I.v9)((function(e){return e.partnerList.data.tableData})),a=n.pageIndex,c=n.pageSize,o=n.sort,l=n.query,i=(n.total,n.sort_field),u=n.order,f=(0,I.v9)((function(e){return e.partnerList.data.loading})),p=(0,I.v9)((function(e){return e.partnerList.data.orderList.res})),h=(0,I.v9)((function(e){return e.partnerList.data.orderList.total})),b=(0,r.useState)(!1),C=(0,s.Z)(b,2),E=C[0],F=C[1],M=(0,r.useState)(""),q=(0,s.Z)(M,2),U=q[0],O=q[1],B=(0,r.useRef)(null),K=(0,I.I0)(),G=(0,I.v9)((function(e){return e.auth.user})),H=G.enterAccount,Y=(G.password,G.rememberMe,G.usernameOrEmail,(0,I.v9)((function(e){var t,n;return null===(t=e.partnerList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.parentAccountList}))),Q=function(){var e=(0,y.Z)((0,w.Z)().mark((function e(){var t;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===U.acc_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,z.ME)(U.id,t);case 3:e.sent.data.success&&("ACTIVE"===t?(F(!1),(0,V.By)("success","Activated successfully")):(F(!1),(0,V.By)("success","Deactivated successfully")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){var n=e.row,s=(0,N.Z)().textTheme,a=(0,_.s0)(),c=(0,r.useCallback)((function(){a("/app/sales/order-details/".concat(n.id))}),[a,n]),o="ACTIVE"!=n.acc_status?"green":"rose",l="ACTIVE"!=n.acc_status?S.vUq:S.qGf,i={color:"grey",pointerEvents:"none"},u=(t.canAdd,t.canEdit),d=t.canView,f=t.canActivate,m=t.canClone;t.canApprove;return(0,P.jsxs)("div",{className:"text-lg",children:[(0,P.jsx)(A.u,{title:"Edit",children:(0,P.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),onClick:function(){a("/account-new-partners/edit",{state:{data:n,mode:"EDIT"}})},style:u?null:i,children:(0,P.jsx)(D.U$P,{})})}),(0,P.jsx)(A.u,{title:"Clone",children:(0,P.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){a("/account-new-partners",{state:{data:n,mode:"ADD"}})},style:m?null:i,children:(0,P.jsx)(T.$OG,{})})}),(0,P.jsx)(A.u,{title:"View",children:(0,P.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),onClick:c,style:d?null:i,children:(0,P.jsx)(k.Vvo,{})})}),(0,P.jsx)(A.u,{title:"".concat("ACTIVE"!=n.acc_status?"Activate":"Deactivate"),children:(0,P.jsx)("span",{className:"cursor-pointer p-1 text-".concat(o,"-800 hover:text-").concat(o,"-800"),onClick:function(){F(!0),O(n)},style:f?null:i,children:(0,P.jsx)(l,{})})})]})};(0,r.useEffect)((function(){K((0,v.hy)(H))}),[]),(0,r.useEffect)((function(){var e=function(){var e=(0,y.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K((0,v.AU)({page_no:a-1,page_size:c,sort_field:i||"id",unq_id:H,order:u}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),K((0,v.Nq)({enterAccount:H}))}),[a,c,o,E,K,l,H,i]);var J=(0,r.useMemo)((function(){return{pageIndex:a,pageSize:c,sort:o,query:l,total:h}}),[a,c,o,l,h]);(0,r.useEffect)((function(){var e;B&&(null===(e=B.current)||void 0===e||e.resetSelected())}),[p]);var W=(0,r.useMemo)((function(){return[{header:"Actions",flex:1,id:"action",cell:function(e){return(0,P.jsx)($,{row:e.row.original})}},{header:"Partner ID",accessorKey:"acc_unq_id"},{header:"Partner Title",accessorKey:"acc_name"},{header:"Operator",accessorKey:"acc_parent",cell:function(e){var t=e.row.original.acc_parent;return(0,P.jsx)("span",{children:(0,V.ZP)(t,Y)})}},{header:" Email ID ",accessorKey:"acc_email_id"},{header:"Address",accessorKey:"acc_add_l1"},{header:"Status",accessorKey:"acc_status",flex:1,cell:function(e){var t,n,s,r=e.row.original.acc_status;return(0,P.jsx)("div",{className:"flex items-center",children:(0,P.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=L[r])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=L[r])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===r&&(0,P.jsx)(S.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===r&&(0,P.jsx)(S.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===r&&(0,P.jsx)(Z.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(s=L[r])||void 0===s?void 0:s.label]})})}}]}),[Y]),X=(0,r.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),s=[];n.forEach((function(e){s.push(e.id)})),K(d(s))}else K(d([]))}),[K]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(g.wQ,{ref:B,columns:W,data:p,loading:f,pagingData:J,onPaginationChange:function(e){var t=R()(J);t.pageIndex=e,K((0,v.N3)(t))},onSelectChange:function(e){var t=R()(J);t.pageSize=Number(e),t.pageIndex=1,K((0,v.N3)(t))},onSort:function(e){var t=R()(J),n=(0,V.TD)(e.key);t.sort_field=n,t.order=e.order,K((0,v.N3)(t))},onCheckBoxChange:function(e,t){K(e?m([t.id]):x(t.id))},onIndeterminateCheckBoxChange:X,selectable:!0}),(0,P.jsxs)(A.Vq,{isOpen:E,onClose:function(){return F(!1)},children:[(0,P.jsxs)("h6",{style:(0,j.Z)({fontStyle:"normal",fontSize:700},"fontSize","18px"),children:[" ","ACTIVE"!=U.acc_status?"Activate":"Deactivate"]}),(0,P.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,P.jsx)("p",{children:"ACTIVE"!=U.acc_status?"Are you sure you want to activate this partner ?":"Are you sure you want to deactivate this partner ?"}),(0,P.jsxs)("div",{className:"mt-6 text-end",children:[(0,P.jsx)(A.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return F(!1)},children:"No"}),(0,P.jsx)(A.zx,{variant:"solid",onClick:function(){return Q()},children:"Yes"})]})]})]})},M=n(48573),q=n.n(M),U=function(){var e=(0,I.I0)(),t=(0,I.v9)((function(e){return e.auth.user})),n=t.enterAccount,s=(t.password,t.rememberMe,t.usernameOrEmail,(0,r.useRef)()),a=(0,I.v9)((function(e){return e.partnerList.data.tableData})),c=q()((function(e){var t=R()(a);t.page_no=a.pageIndex-1,t.page_size=a.pageSize,t.unq_id=n,t.sort_field=a.sort_field,"string"===typeof e&&e.length>1&&o(t);"string"===typeof e&&0===e.length&&o(t)}),500);var o=function(t){e((0,v.N3)(t)),e((0,v.AU)(t))};return(0,P.jsx)(A.II,{ref:s,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,P.jsx)(k.O6C,{className:"text-lg"}),onChange:function(e){c(e.target.value)}})},O=n(11087),B=function(){return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(A.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,P.jsx)(k.Yv7,{}),onClick:function(){},children:"Filter"})})},K=(n(70065),function(e){var t=e.actionPermissions.canAdd;return(0,P.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,P.jsx)(U,{}),(0,P.jsx)(B,{}),(0,P.jsx)(O.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,P.jsx)(A.zx,{block:!0,size:"sm",icon:(0,P.jsx)(k.H_7,{}),children:"Export"})}),(0,P.jsx)(O.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,P.jsx)(A.zx,{block:!0,size:"sm",icon:(0,P.jsx)(D.cgG,{}),children:"Columns"})}),(0,P.jsx)(O.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/account-new-partners",children:(0,P.jsxs)(A.zx,{block:!0,variant:"solid",style:{color:"white",fontStyle:"normal",fontSize:"18px"},className:"flex justify-center pt-[6px] gap-1",size:"sm",disabled:!t,children:[(0,P.jsx)("p",{className:"pt-[2px]",children:(0,P.jsx)(k.yEd,{})}),"Create"]})})]})}),G=function(){var e=(0,I.I0)(),t=(0,I.v9)((function(e){return e.partnerList.state.selectedRows})),n=(0,I.v9)((function(e){return e.partnerList.state.selectedRow})),s=(0,I.v9)((function(e){return e.partnerList.state.deleteMode})),r=(0,I.v9)((function(e){return e.partnerList.data.tableData})),a=function(){e(p("")),"single"===s&&e(f([]))},c=function(){var r=(0,y.Z)((0,w.Z)().mark((function r(){var a,c;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e(p("")),"single"!==s){r.next=7;break}return r.next=4,(0,v.RT)({id:n});case 4:a=r.sent,o(a),e(f([]));case 7:if("batch"!==s){r.next=13;break}return r.next=10,(0,v.RT)({id:t});case 10:c=r.sent,o(c,t.length),e(d([]));case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),o=function(t,n){t&&(e((0,v.AU)(r)),A.Am.push((0,P.jsxs)(A.P_,{title:"Successfuly Deleted",type:"success",duration:2500,children:["single"===s&&"Order ","batch"===s&&"".concat(n," orders "),"successfuly deleted"]}),{placement:"top-center"}))};return(0,P.jsx)(g.QH,{isOpen:"single"===s||"batch"===s,onClose:a,onRequestClose:a,type:"danger",title:"Delete product",onCancel:a,onConfirm:c,confirmButtonColor:"red-600",children:(0,P.jsx)("p",{children:"Are you sure you want to delete this order? All record related to this order will be deleted as well. This action cannot be undone."})})};(0,C.fn)("partnerList",b);var H=function(){var e=(0,I.v9)((function(e){return e.auth.user})).permissionsList,t=(0,r.useState)(e.includes("ACCPTRADD")),n=(0,s.Z)(t,2),a=n[0],c=(n[1],(0,r.useState)(e.includes("ACCPTREDI"))),o=(0,s.Z)(c,2),l=o[0],i=(o[1],(0,r.useState)(e.includes("ACCPTRVIE"))),u=(0,s.Z)(i,2),d=u[0],f=(u[1],(0,r.useState)(e.includes("ACCPTRDEA"))),m=(0,s.Z)(f,2),x=m[0],p=(m[1],(0,r.useState)(e.includes("ACCPTRCLO"))),h=(0,s.Z)(p,2),v=h[0],b=(h[1],(0,r.useState)(e.includes("ACCPTRAPP"))),C=(0,s.Z)(b,2),j=C[0],w=(C[1],{canAdd:a,canEdit:l,canClone:v,canView:d,canActivate:x,canApprove:j});return(0,P.jsxs)(g.lG,{className:"h-full",bodyClass:"h-full",children:[(0,P.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,P.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Partners"}),(0,P.jsx)(K,{actionPermissions:w})]}),(0,P.jsx)(F,{actionPermissions:w}),(0,P.jsx)(G,{})]})}}}]);
//# sourceMappingURL=453.4dcdc005.chunk.js.map