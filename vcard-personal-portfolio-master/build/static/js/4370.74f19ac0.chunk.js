"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4370],{44630:function(e,t,n){var a=n(29439),s=n(72791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,s.useState)(""),n=(0,a.Z)(t,2),l=n[0],r=n[1];return(0,s.useEffect)((function(){if(l){var t=setTimeout((function(){return r("")}),e);return function(){clearTimeout(t)}}}),[l]),[l,r]}},74370:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(72791),s=n(74165),l=n(4942),r=n(1413),i=n(15861),c=n(29439),u=n(7869),o=n(50662),d=n(62797),m=n(92506),p=n(57689),x=n(11087),h=n(44630),f=n(54110),v=n(36232),_=n(67202),j=n(16030),y=n(99025),b=(n(53540),n(37450)),g=n(80184),k=[{name:"Fixed",value:"Fixed"},{name:"Percentage",value:"Percentage"}],N=d.Ry().shape({Checkout:d.O7(),Payments:d.O7(),Settlements:d.O7()}).test("checkbox-required","Please select at the customer type",(function(e){var t=e.Checkout,n=e.Payments,a=e.Settlements;return t||n||a})).nullable(),C=function(e){var t,n,C=(0,a.useRef)(),Z=(0,p.TH)(),S=null!==(t=Z.state)&&void 0!==t&&t.mode?Z.state.mode:"ADD",w=null===(n=Z.state)||void 0===n?void 0:n.data,D=(0,a.useState)(w?w.tax_comp_ded_type:""),T=(0,c.Z)(D,2),q=T[0],M=T[1],P=function(e){M(e)},F=(0,p.s0)(),E=(0,j.I0)(),A=d.Ry().shape({title:d.Z_().trim().required("Please enter tax title").nullable()}),I={title:"",description:"",app_modules:{Checkout:!1,Payments:!1,settlements:!1},placement:"",acc_unq_id:""},J=(0,j.v9)((function(e){var t,n;return null===(t=e.TaxComponentList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.parentAccountList})),G=(0,j.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})),O=(G.unq_id,G.user_type),L=(0,h.Z)(),Y=(0,c.Z)(L,2),z=Y[0],R=Y[1],V=w&&w.app_modules?JSON.parse(w.app_modules):{checkout:!1,payments:!1,settlements:!1},U=(0,a.useState)((0,_.eY)(I,w||I)),B=(0,c.Z)(U,2),H=B[0],K=B[1],Q=(0,a.useState)(V),W=(0,c.Z)(Q,2),X=W[0],$=W[1],ee=(0,j.v9)((function(e){return e.auth.user})),te=ee.enterAccount,ne=ee.acc_mno_id;(0,a.useEffect)((function(){if(w){var e=(0,_.eY)(H,w);K(e)}}),[S,H]),(0,a.useEffect)((function(){E((0,y.Nq)({enterAccount:te}))}),[E,te]);var ae=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},n,t.target.checked))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,a,l,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={title:t.title,app_modules:X,description:t.description,acc_unq_id:t.acc_unq_id},K(n),a={tax_comp_title:t.title.trim(),app_modules:JSON.stringify(n.app_modules),tax_comp_desc:null===t||void 0===t?void 0:t.description,md_tax_status:"ACTIVE",tax_comp_ded_type:q,dgl_acc_mno_id:ne,tax_value:"30",unq_id:"GlobalMno"!==O?te:t.acc_unq_id},"ADD"!==S){e.next=10;break}return e.next=6,(0,v.UY)(a);case 6:"success"===(l=e.sent).status?((0,f.By)("success","Created successfully "),F("/masterDataMenu-item-view-4")):"failed"===l.status&&R((0,f.ld)(l)),e.next=17;break;case 10:if("EDIT"!==S){e.next=17;break}return a.id=w.id,a.unq_id="GlobalMno"!==O?te:t.acc_unq_id,e.next=15,(0,v.Sr)(a,w.id);case 15:"success"===(r=e.sent).status?((0,f.By)("success","Updated successfully"),F("/masterDataMenu-item-view-4")):"failed"===r.status&&R((0,f.ld)(r));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.validate((0,r.Z)({},X));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),re=[{name:"Master Data"},{name:"Tax Component",link:"/masterDataMenu-item-view-4"},{name:"Add Tax Component"}];return"EDIT"===S&&(re=[{name:"Master Data"},{name:"Tax Component",link:"/masterDataMenu-item-view-4"},{name:null===w||void 0===w?void 0:w.tax_comp_title,link:"/masterDataMenu-item-view-4",state:w},{name:"Edit Tax Component"}]),(0,g.jsxs)(g.Fragment,{children:[z&&(0,g.jsx)(o.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:z}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"mb-3",children:(0,g.jsx)(b.Z,{list:re})}),(0,g.jsxs)("h3",{className:"mb-5",children:["EDIT"===S?"Edit ":"Create ","Tax Component"]}),(0,g.jsx)(m.J9,{innerRef:C,initialValues:H,validationSchema:A,onSubmit:function(e,t){(0,t.setSubmitting)(!0),se(e)},children:function(e){var t=e.values,n=e.touched,a=e.errors;e.isSubmitting;return(0,g.jsxs)(m.l0,{children:[(0,g.jsx)("div",{className:"p-5",style:{backgroundColor:"#F5F5F5"},children:(0,g.jsx)(u.lG,{className:"h-full",bodyClass:"h-full",divider:!0,children:(0,g.jsx)(o.Yb,{children:(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"md:grid gap-4 mx-4 pl-2",children:[(0,g.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,g.jsx)(o.xJ,{label:(0,g.jsxs)("p",{children:["Operator ",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:a.acc_unq_id&&n.acc_unq_id,errorMessage:a.acc_unq_id,children:(0,g.jsx)(m.gN,{name:"acc_unq_id",validate:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GlobalMno"!==O){e.next=9;break}return e.prev=1,e.next=4,d.Z_().required("Please enter operator").validate(t);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var n=e.field,a=e.form;return(0,g.jsx)(o.Ph,{isDisabled:"GlobalMno"!==O,placeholder:"Select Operator",field:n,form:a,options:J,value:"GlobalMno"!==O?null===J||void 0===J?void 0:J.filter((function(e){return e.acc_unq_id===te})):null===J||void 0===J?void 0:J.filter((function(e){return e.acc_unq_id===t.acc_unq_id})),onChange:function(e){return a.setFieldValue(n.name,e.acc_unq_id)}})}})})}),(0,g.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,g.jsx)(o.xJ,{label:(0,g.jsxs)("p",{children:["Tax Title",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),className:"",invalid:a.title&&n.title,errorMessage:a.title,children:(0,g.jsx)(m.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Tax Title",component:o.II})})}),(0,g.jsx)(o.xJ,{label:(0,g.jsxs)("p",{children:["Deduction Type",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),children:(0,g.jsx)(o.Y8.Group,{value:q,onChange:P,children:k.map((function(e){return(0,g.jsx)(o.Y8,{value:e.value,id:e.value,children:e.name},e.value)}))})}),(0,g.jsx)(o.xJ,{label:"Description",className:"",children:(0,g.jsx)(m.gN,{name:"description",children:function(e){var t=e.field,n=e.form;return(0,g.jsx)(u.LD,{style:{width:"60%"},value:t.value,onChange:function(e){return n.setFieldValue(t.name,e)}})}})}),(0,g.jsx)(o.xJ,{label:(0,g.jsxs)("p",{children:["Applicable Modules",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:n.app_modules&&!0!==(X.Checkout||X.Payments||X.Settlements),errorMessage:"Please select at least one of the applicable modules",children:(0,g.jsxs)("div",{className:"flex mt-2",children:[(0,g.jsx)("div",{className:"flex",children:(0,g.jsxs)("p",{style:{display:"flex",marginTop:"2%",marginLeft:"3px"},children:[" ",(0,g.jsx)(m.gN,{className:"h-5 w-5",type:"checkbox",name:"app_modules.Checkout",checked:X.Checkout,onChange:function(e){return ae(e,"Checkout")},validate:le}),(0,g.jsx)("label",{className:"ml-2 ",htmlFor:"app_modules.Checkout",children:"Checkout"})]})}),(0,g.jsx)("div",{className:"flex ml-3",children:(0,g.jsxs)("p",{style:{display:"flex",marginTop:"2%",marginLeft:"3px"},children:[(0,g.jsx)(m.gN,{className:"h-5 w-5",type:"checkbox",name:"app_modules.Payments",checked:X.Payments,onChange:function(e){return ae(e,"Payments")},validate:le}),(0,g.jsx)("label",{className:"ml-2",htmlFor:"app_modules.Payments",children:"Payments"})]})}),(0,g.jsx)("div",{className:"flex ml-3",children:(0,g.jsxs)("p",{style:{display:"flex",marginTop:"2%",marginLeft:"3px"},children:[(0,g.jsx)(m.gN,{className:"h-5 w-5",type:"checkbox",name:"app_modules.Settlements",checked:X.Settlements,onChange:function(e){return ae(e,"Settlements")},validate:le}),(0,g.jsx)("label",{className:"ml-2",htmlFor:"app_modules.Settlements",children:"Settlements"})]})})]})})]})})})})}),(0,g.jsxs)("div",{className:" pt-4 text-right w-full flex justify-end",children:[(0,g.jsx)(x.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/masterDataMenu-item-view-4",children:(0,g.jsx)(o.zx,{type:"button",className:"mx-2",style:{backgroundColor:"#4D4D4D",fontStyle:"normal",fontSize:"18px"},variant:"solid",children:"Cancel"})}),(0,g.jsx)(o.zx,{type:"submit",variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},children:"Submit"})]})]})}})]})]})};function Z(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"mt-5",children:(0,g.jsx)(C,{})})})}}}]);
//# sourceMappingURL=4370.74f19ac0.chunk.js.map