"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4491],{44630:function(e,t,r){var n=r(29439),s=r(72791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,s.useState)(""),r=(0,n.Z)(t,2),a=r[0],i=r[1];return(0,s.useEffect)((function(){if(a){var t=setTimeout((function(){return i("")}),e);return function(){clearTimeout(t)}}}),[a]),[a,i]}},34491:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var n=r(72791),s=r(74165),a=r(4942),i=r(1413),c=r(15861),l=r(29439),u=r(7869),o=r(50662),d=r(92506),m=r(16030),p=r(57689),f=r(11087),x=r(55173),h=r(67202),v=r(44630),_=r(54110),y=(r(53540),r(2158)),C=r(62797),g=r(37450),j=r(80184),b=C.Ry().shape({Enterprise_Customer:C.O7(),Retail_Customer:C.O7()}).test("checkbox-required","Please select at the customer type",(function(e){var t=e.Enterprise_Customer,r=e.Retail_Customer;return t||r})).nullable(),k=C.Ry().shape({title:C.Z_().trim().required("Please enter category title").nullable()}),Z=function(e){var t,r,Z={title:"",description:"",cust_cat_type:{Enterprise_Customer:!1,Retail_Customer:!1},acc_unq_id:""},N=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})),D=N.enterAccount,w=(N.unq_id,N.user_type),E=(0,m.I0)(),q=(0,n.useState)(Z),S=(0,l.Z)(q,2),M=(S[0],S[1],(0,n.useState)({})),R=(0,l.Z)(M,2),T=(R[0],R[1]),F=(0,v.Z)(),I=(0,l.Z)(F,2),A=I[0],J=I[1],O=(0,n.useRef)(),G=(0,p.TH)(),P=null!==(t=G.state)&&void 0!==t&&t.mode?G.state.mode:"ADD",V=null===(r=G.state)||void 0===r?void 0:r.data,z=(0,p.s0)(),L=V&&V.cust_cat_type?JSON.parse(V.cust_cat_type):{Enterprise_Customer:!1,Retail_Customer:!1},B=(0,n.useState)(L),H=(0,l.Z)(B,2),U=H[0],W=H[1],Y=(0,m.v9)((function(e){var t,r;return null===(t=e.CustomerCategoryList)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.custAccountList})),K=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},r,t.target.checked))}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,n,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={title:t.title,description:t.description,cust_cat_type:U,acc_unq_id:t.acc_unq_id},n={cust_cat_type:JSON.stringify(r.cust_cat_type),cust_cat_title:t.title.trim(),cust_cat_desc:null===t||void 0===t?void 0:t.description,md_cus_status:"ACTIVE",unq_id:"GlobalMno"!==w?D:t.acc_unq_id},"ADD"!==P){e.next=10;break}return e.next=5,(0,x.u5)(n);case 5:"success"===(a=e.sent).status&&((0,_.By)("success","Created successfully"),z("/masterDataMenu-item-view-3")),"failed"===a.status&&J((0,_.ld)(a)),e.next=18;break;case 10:if("EDIT"!==P){e.next=18;break}return n.id=V.id,n.md_cus_status=V.md_cus_status,e.next=15,(0,x.Wi)(n);case 15:"success"===(i=e.sent).status&&((0,_.By)("success","Updated successfully"),z("/masterDataMenu-item-view-3")),"failed"===i.status&&J((0,_.ld)(i));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){if(V){var e=(0,h.RD)(Z,V);T(e)}}),[V]),(0,n.useEffect)((function(){E((0,y.fV)({enterAccount:D}))}),[E,D]);var X=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validate((0,i.Z)({},U));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),$=[{name:"Master Data"},{name:"Customer Category",link:"/masterDataMenu-item-view-3"},{name:"Add Customer Category"}];return"EDIT"===P&&($=[{name:"Master Data"},{name:"Customer Category",link:"/masterDataMenu-item-view-3"},{name:null===V||void 0===V?void 0:V.cust_cat_title,link:"/masterDataMenu-item-view-3",state:V},{name:"Edit Customer Category"}]),(0,j.jsxs)(j.Fragment,{children:[A&&(0,j.jsx)(o.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:A}),(0,j.jsx)("div",{children:(0,j.jsx)(g.Z,{list:$})}),(0,j.jsxs)("h3",{className:"mb-5 mt-3",children:["EDIT"===P?"Edit ":"Create ","Customer Category"]}),(0,j.jsx)("div",{className:"mt-6  rounded ",children:(0,j.jsx)(d.J9,{innerRef:O,initialValues:Z,validationSchema:k,onSubmit:function(e,t){(0,t.setSubmitting)(!0),Q(e)},children:function(e){var t=e.values,r=e.touched,n=e.errors;e.isSubmitting;return(0,j.jsxs)(d.l0,{children:[(0,j.jsx)("div",{style:{backgroundColor:"#F5F5F5",padding:"15px",marginTop:"10px"},children:(0,j.jsx)(o.Yb,{children:(0,j.jsx)(u.lG,{className:"h-full p-4",bodyClass:"h-full",children:(0,j.jsxs)("div",{className:"gap-3 mx-4 my-2 mt-4",children:[(0,j.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,j.jsx)(o.xJ,{label:(0,j.jsxs)("p",{children:["Operator ",(0,j.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:n.acc_unq_id&&r.acc_unq_id,errorMessage:n.acc_unq_id,children:(0,j.jsx)(d.gN,{name:"acc_unq_id",validate:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GlobalMno"!==w){e.next=9;break}return e.prev=1,e.next=4,C.Z_().required("Please select operator").validate(t);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var r=e.field,n=e.form;return(0,j.jsx)(o.Ph,{isDisabled:"GlobalMno"!==w,placeholder:"Select Operator",field:r,form:n,disabled:!0,options:Y,value:"GlobalMno"!==w?null===Y||void 0===Y?void 0:Y.filter((function(e){return e.acc_unq_id===D})):null===Y||void 0===Y?void 0:Y.filter((function(e){return e.acc_unq_id===t.acc_unq_id})),onChange:function(e){return n.setFieldValue(r.name,e.acc_unq_id)}})}})})}),(0,j.jsxs)("div",{className:"md:grid grid-cols-2",children:[(0,j.jsx)(o.xJ,{label:(0,j.jsxs)("p",{children:["Select Customer Type",(0,j.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:r.cust_cat_type&&!0!==(U.Enterprise_Customer||U.Retail_Customer),errorMessage:"Please select at the customer type",children:(0,j.jsxs)("div",{className:"flex mt-2",children:[(0,j.jsxs)("div",{className:"flex ",children:[(0,j.jsx)(d.gN,{className:"w-5 h-5 mt-1 ",type:"checkbox",name:"cust_cat_type.Enterprise_Customer",checked:U.Enterprise_Customer,onChange:function(e){return K(e,"Enterprise_Customer")},validate:X}),(0,j.jsx)("label",{className:"ml-4 mb-2 text-lg",htmlFor:"cust_cat_type.Enterprise_Customer",children:"Enterprise Customer"})]}),(0,j.jsxs)("div",{className:"flex ml-3",children:[(0,j.jsx)(d.gN,{className:"w-5 h-5 mt-1 ",type:"checkbox",name:"cust_cat_type.Retail_Customer",checked:U.Retail_Customer,onChange:function(e){return K(e,"Retail_Customer")},validate:X}),(0,j.jsx)("label",{className:"text-lg ml-4",htmlFor:"cust_cat_type.Retail_Customer",children:"Retail Customer"})]})]})}),(0,j.jsx)("div",{className:"ml-6",children:(0,j.jsx)(o.xJ,{label:(0,j.jsxs)("p",{children:["Customer Category Title ",(0,j.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:n.title&&r.title,errorMessage:n.title,children:(0,j.jsx)(d.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Category Title",component:o.II})})})]}),(0,j.jsx)(o.xJ,{label:"Description",children:(0,j.jsx)(d.gN,{name:"description",children:function(e){var t=e.field,r=e.form;return(0,j.jsx)(u.LD,{value:t.value,onChange:function(e){return r.setFieldValue(t.name,e)}})}})})]})})})}),(0,j.jsx)("div",{className:"pt-4 text-right  w-full flex justify-end",children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/masterDataMenu-item-view-3",children:(0,j.jsx)(o.zx,{className:"mx-2",variant:"solid",style:{backgroundColor:"#4D4D4D",fontStyle:"normal",fontSize:"18px"},children:"Cancel"})}),(0,j.jsx)(o.zx,{type:"submit",variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},children:"Submit"})]})})]})}})})]})};function N(){var e,t=(0,p.TH)();null!==(e=t.state)&&void 0!==e&&e.mode&&t.state.mode;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"mt-5",children:(0,j.jsx)(Z,{})})})}}}]);
//# sourceMappingURL=4491.62f08765.chunk.js.map