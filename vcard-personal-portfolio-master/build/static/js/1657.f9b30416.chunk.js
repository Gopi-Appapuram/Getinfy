"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[1657],{44630:function(e,t,n){var a=n(29439),r=n(72791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,r.useState)(""),n=(0,a.Z)(t,2),i=n[0],s=n[1];return(0,r.useEffect)((function(){if(i){var t=setTimeout((function(){return s("")}),e);return function(){clearTimeout(t)}}}),[i]),[i,s]}},91657:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(74165),r=n(15861),i=n(29439),s=n(72791),l=n(7869),c=n(50662),o=n(92506),d=n(62797),u=n(80184),m=n(57689),f=n(11087),p=n(11696),x=n(67202),v=n(44630),h=n(54110),g=n(16030),j=n(60463),b=n(58617),_=(n(53540),n(67267)),y=n(54048),N=n(37450);function C(){var e,t,n=(0,m.s0)(),C=d.Ry().shape({prodCatTitle:d.Z_().trim().required("Please enter product category title").nullable()}),k={prodCatTitle:"",description:"",imageFile:"",acc_unq_id:""},w=(0,g.v9)((function(e){var t,n;return null===(t=e.prodCatList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.parentAccountList})),D=(0,g.I0)(),Z=(0,g.v9)((function(e){return e.auth.user})),q=Z.enterAccount,F=Z.user_type,P=Z.acc_user_id,T=(0,v.Z)(),M=(0,i.Z)(T,2),E=M[0],G=M[1],S=(0,s.useRef)(),I=(0,m.TH)(),A=null!==(e=I.state)&&void 0!==e&&e.mode?I.state.mode:"ADD",J=null===(t=I.state)||void 0===t?void 0:t.data,U=(0,s.useState)((0,x.ms)(k,J||k)),V=(0,i.Z)(U,2),z=V[0],L=V[1],O=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var r,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={prod_cat_title:t.prodCatTitle.trim(),prod_cat_img_url:t.imageFile,prod_cat_desc:null===t||void 0===t?void 0:t.description,md_pro_cat_status:"ACTIVE",unq_id:"GlobalMno"!==F?q:t.acc_unq_id},"ADD"!==A){e.next=8;break}return e.next=4,(0,p.oS)(r);case 4:"success"===(i=e.sent).status?((0,h.By)("success","Created successfully"),n("/masterDataMenu-item-view-2")):"failed"===i.status&&G((0,h.ld)(i)),e.next=16;break;case 8:if("EDIT"!==A){e.next=16;break}return r.id=J.id,r.unq_id="GlobalMno"!==F?q:t.acc_unq_id,r.md_pro_cat_status=J.md_pro_cat_status,e.next=14,(0,p.Is)(r,J.id);case 14:"success"===(s=e.sent).status?((0,h.By)("success","Updated successfully"),n("/masterDataMenu-item-view-2")):"failed"===s.status&&G((0,h.ld)(s));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){if(J){var e=(0,x.ms)(z,J);L(e)}}),[z,J]),(0,s.useEffect)((function(){D((0,j.Nq)({enterAccount:q}))}),[D,q]);var B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[0],["image/jpeg","image/png"].includes(r.type)){e.next=5;break}return(0,h.By)("warning","JPG/PNG files are allowed only!"),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,(0,p.T7)(t[0],P,2);case 8:return i=e.sent,e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(5),console.error("Error during file upload:",e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),R=(0,s.useState)(!1),H=(0,i.Z)(R,2),X=H[0],Y=H[1],K=(0,s.useState)(null),Q=(0,i.Z)(K,2),W=Q[0],$=Q[1],ee=[{name:"Master Data"},{name:"Product Category",link:"/masterDataMenu-item-view-2"},{name:"Add Product Category"}];return"EDIT"===A&&(ee=[{name:"Master Data"},{name:"Product Category",link:"/masterDataMenu-item-view-2"},{name:null===J||void 0===J?void 0:J.prod_cat_title,link:"/masterDataMenu-item-view-2",state:J},{name:"Edit Product Category"}]),(0,u.jsxs)(u.Fragment,{children:[E&&(0,u.jsx)(c.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:E}),(0,u.jsx)("div",{children:(0,u.jsx)(N.Z,{list:ee})}),(0,u.jsxs)("div",{className:"mt-5",children:[(0,u.jsxs)("h3",{className:"mb-4",children:["EDIT"===A?"Edit":"Add"," Product Category"]}),(0,u.jsx)(o.J9,{innerRef:S,initialValues:z,validationSchema:C,onSubmit:function(e){O(e)},children:function(e){var t=e.values,n=e.touched,i=e.errors,s=(e.isSubmitting,e.setFieldValue);return console.log(t,"values"),(0,u.jsxs)(o.l0,{children:[(0,u.jsx)("div",{className:"p-5",style:{backgroundColor:"#F5F5F5"},children:(0,u.jsxs)(l.lG,{className:"h-full",bodyClass:"h-full",divider:!0,children:[(0,u.jsxs)(c.Yb,{children:[(0,u.jsxs)("div",{className:"md:grid gap-4 mx-4 mt-3 pl-2",children:[(0,u.jsx)("div",{className:"md:grid grid-cols-2 gap-4 ",children:(0,u.jsx)(c.xJ,{label:(0,u.jsxs)("p",{children:["Operator ",(0,u.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.acc_unq_id&&n.acc_unq_id,errorMessage:i.acc_unq_id,children:(0,u.jsx)(o.gN,{name:"acc_unq_id",validate:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GlobalMno"!==F){e.next=9;break}return e.prev=1,e.next=4,d.Z_().required("Please select operator").validate(t);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var n=e.field,a=e.form;return(0,u.jsx)(c.Ph,{isDisabled:"GlobalMno"!==F,placeholder:"Select Operator",field:n,form:a,options:w,value:"GlobalMno"!==F?null===w||void 0===w?void 0:w.filter((function(e){return e.acc_unq_id===q})):null===w||void 0===w?void 0:w.filter((function(e){return e.acc_unq_id===t.acc_unq_id})),onChange:function(e){return a.setFieldValue(n.name,e.acc_unq_id)}})}})})}),(0,u.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,u.jsx)(c.xJ,{label:(0,u.jsxs)("p",{children:[" Product Category Title ",(0,u.jsx)("span",{style:{color:"red"},children:"*"})]}),className:"",invalid:i.prodCatTitle&&n.prodCatTitle,errorMessage:i.prodCatTitle,children:(0,u.jsx)(o.gN,{type:"text",autoComplete:"off",name:"prodCatTitle",placeholder:"Enter Title",component:c.II})})}),(0,u.jsx)(c.xJ,{label:"Description",className:"",children:(0,u.jsx)(o.gN,{name:"description",children:function(e){var t=e.field,n=e.form;return(0,u.jsx)(l.LD,{style:{width:"60%"},value:t.value,onChange:function(e){return n.setFieldValue(t.name,e)}})}})})]}),(0,u.jsx)("div",{className:"p-2",children:(0,u.jsxs)(l.lG,{children:[(0,u.jsx)("h5",{className:"mb-4 mt-2 mx-4",children:"UPLOAD IMAGE"}),(0,u.jsxs)(c.xJ,{label:"",children:[(0,u.jsx)(o.gN,{name:"imageFile",children:function(e){e.field,e.form;return(0,u.jsx)("div",{className:"mx-4",children:(0,u.jsx)(c.gq,{beforeUpload:B,draggable:!0,className:"border-blue-500 bg-blue-50 w-96 h-36",onChange:function(e,t,n,a){var r;s("imageFile",null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.fileUnqId)},children:(0,u.jsxs)("div",{className:"my-10 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4 flex justify-center",children:(0,u.jsx)(b.qX3,{className:"h-10",style:{color:"#2563eb"}})}),(0,u.jsxs)("p",{className:"font-semibold",children:[(0,u.jsxs)("span",{className:"text-gray-800 dark:text-inherit",children:["Upload Files Here or"," "]}),(0,u.jsx)("span",{className:"text-blue-500",children:"browse"})]}),(0,u.jsx)("p",{className:"mt-1 opacity-60 dark:text-inherit",children:"JPG/PNG are allowed"})]})})})}}),(null===t||void 0===t?void 0:t.imageFile)&&(0,u.jsxs)("div",{className:"upload-file cursor-pointer w-96 ml-4",children:[(0,u.jsx)("div",{className:"upload-file-info",onClick:function(){return e=null===t||void 0===t?void 0:t.imageFile,Y(!0),void $(e);var e},children:(0,u.jsx)("h6",{className:"upload-file-name",children:null===t||void 0===t?void 0:t.imageFile.substring(0,15)})}),(0,u.jsx)(_.Z,{className:"upload-file-remove ",onClick:function(){s("imageFile","")}})]})]})]})})]}),(0,u.jsx)(c.Vq,{isOpen:X,onClose:function(){return Y(!1)},children:(0,u.jsxs)("div",{className:"p-5",children:[(0,u.jsx)("img",{src:"".concat(y.Z.apiPrefix,"/media/uniqid/").concat(W),alt:"Content"}),(0,u.jsx)(c.zx,{onClick:function(){return window.open("".concat(y.Z.apiPrefix,"/media/uniqid/").concat(W),"_blank")},className:"mt-2",variant:"solid",children:"Download"})]})})]})}),(0,u.jsx)("div",{className:"mt-4 text-right flex justify-end",children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/masterDataMenu-item-view-2",children:(0,u.jsx)(c.zx,{type:"button",className:"mx-2",onClick:"onPrevious",variant:"solid",style:{backgroundColor:"#4D4D4D"},children:"Cancel"})}),(0,u.jsx)(c.zx,{type:"submit",variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},children:"Submit"})]})})]})}})]})]})}}}]);
//# sourceMappingURL=1657.f9b30416.chunk.js.map