(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[5244],{55244:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(29439),s=n(72791),r=n(87781),o=n(93433),i=n(95273),c=n(92546),l=(0,i.oM)({name:"Pages/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(!a.selectedRows.includes(n))return{selectedRows:[].concat((0,o.Z)(a.selectedRows),(0,o.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(a.selectedRows.includes(n))return{selectedRows:a.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=l.actions,d=u.setSelectedRows,f=(u.setSelectedRow,u.addRowItem),m=u.removeRowItem,v=(u.toggleDeleteConfirmation,u.setDeleteMode,l.reducer),p=n(7994),x=(0,r.UY)({state:v,data:p.ZP}),g=n(69564),h=n(7869),b=n(74165),C=n(15861),w=n(50662),y=n(16030),j=n(23532),I=n(57689),E=n(58121),k=n.n(E),N=n(16856),A=n(17425),S=n(39126),D=n(54110),T=n(87025),P=n(80184),_={ACTIVE:{label:"Active",dotClass:"bg-black-500",textClass:"text-black-500",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg- [#F5F5F5]"}};var M=function(e){var t=e.actionPermissions,n=(0,s.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],c=(0,s.useRef)(null),l=(0,y.I0)(),u=(0,y.v9)((function(e){return e.Pages.data.tableData})),v=u.pageIndex,x=u.pageSize,g=u.sort,E=u.query,M=(u.total,u.sort_field),R=u.order,V=(0,y.v9)((function(e){return e.Pages.data.loading})),Z=(0,s.useState)(""),z=(0,a.Z)(Z,2),F=z[0],G=z[1],U=(0,y.v9)((function(e){return e.Pages.data.pagesList.res})),q=(0,y.v9)((function(e){return e.Pages.data.pagesList.total})),B=(0,s.useCallback)((function(){l((0,p.kk)())}),[]),L=function(e){var n=e.row,a=(0,j.Z)().textTheme,r=(0,I.s0)(),o=(0,s.useCallback)((function(){r("/masterDataMenu-pages-add",{state:{data:n,mode:"EDIT"}})}),[r,n]),c="ACTIVE"!==n.page_status?"green":"rose",l="ACTIVE"!==n.page_status?A.vUq:A.qGf,u={color:"grey",pointerEvents:"none"},d=(t.canAdd,t.canEdit),f=(t.canView,t.canActivate);t.canClone,t.canApprove;return(0,P.jsxs)("div",{className:"text-lg",children:[(0,P.jsx)(w.u,{title:"Edit",children:(0,P.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(a),onClick:o,style:d?null:u,children:(0,P.jsx)(N.U$P,{})})}),(0,P.jsx)(w.u,{title:"".concat("ACTIVE"!==n.page_status?"Activate":"Deactivate"),children:(0,P.jsx)("span",{className:"cursor-pointer p-1 text-".concat(c,"-800 hover:text-").concat(c,"-800"),onClick:function(){i(!0),G(n)},style:f?null:u,children:(0,P.jsx)(l,{})})})]})},O=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t,n;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===F.page_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,T.hU)(F.id,t);case 3:(n=e.sent).data.success&&"ACTIVE"===t?(i(!1),(0,D.By)("success","Activated successfully")):n.data.success&&"IN_ACTIVE"===t&&(i(!1),(0,D.By)("success","Deactivated successfully"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,y.v9)((function(e){var t,n;return null===(t=e.Pages)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.parentAccountList})),(0,s.useEffect)((function(){var e=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l((0,p._W)({page_no:v-1,page_size:x,sort_field:M||"id",order:R}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l,B,v,x,g,E,o,M,R]),(0,s.useEffect)((function(){var e;c&&(null===(e=c.current)||void 0===e||e.resetSelected())}),[U]);var W=(0,s.useMemo)((function(){return{pageIndex:v,pageSize:x,sort:g,query:E,total:q}}),[v,x,g,E,q]),$=(0,s.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(e){return(0,P.jsx)(L,{row:e.row.original})}},{header:"Page Title",accessorKey:"meta_title"},{header:"Current Status",accessorKey:"page_status",cell:function(e){var t,n,a,s=e.row.original.page_status;return(0,P.jsx)("div",{className:"flex items-center",children:(0,P.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=_[s])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=_[s])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===s&&(0,P.jsx)(A.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===s&&(0,P.jsx)(A.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===s&&(0,P.jsx)(S.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(a=_[s])||void 0===a?void 0:a.label]})})}}]}),[]),H=(0,s.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),a=[];n.forEach((function(e){a.push(e.id)})),l(d(a))}else l(d([]))}),[l]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.wQ,{ref:c,columns:$,data:U,loading:V,pagingData:W,onPaginationChange:function(e){var t=k()(W);t.pageIndex=e,l((0,p.N3)(t))},onSelectChange:function(e){var t=k()(W);t.pageSize=Number(e),t.pageIndex=1,l((0,p.N3)(t))},onSort:function(e){var t=k()(W),n=(0,D.TD)(e.key);t.sort_field=n,t.order=e.order,l((0,p.N3)(t))},onCheckBoxChange:function(e,t){l(e?f([t.id]):m(t.id))},onIndeterminateCheckBoxChange:H,selectable:!0}),(0,P.jsxs)(w.Vq,{isOpen:o,onClose:function(){return i(!1)},children:[(0,P.jsx)("h6",{style:{fontStyle:"normal",fontSize:"18px"},children:"ACTIVE"!==F.page_status?"Activate":"Deactivate"}),(0,P.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,P.jsx)("p",{children:"ACTIVE"!==F.page_status?"Are you sure you want to activate this page ?":"Are you sure you want to deactivate this page ?"}),(0,P.jsxs)("div",{className:"mt-6 text-end",children:[(0,P.jsx)(w.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return i(!1)},children:"No"}),(0,P.jsx)(w.zx,{variant:"solid",onClick:function(){return O()},children:"Yes"})]})]})]})},R=n(58617),V=n(11087),Z=n(48573),z=n.n(Z),F=function(){var e=(0,y.I0)(),t=(0,s.useRef)(),n=(0,y.v9)((function(e){return e.Pages.data.tableData})),a=(0,y.v9)((function(e){return e.auth.user})),r=(a.enterAccount,a.password,a.rememberMe,a.usernameOrEmail,z()((function(e){var t=k()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&o(t);"string"===typeof e&&0===e.length&&o(t)}),500));var o=function(t){e((0,p.N3)(t)),e((0,p._W)(t))};return(0,P.jsx)(w.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,P.jsx)(R.O6C,{className:"text-lg"}),onChange:function(e){r(e.target.value)}})},G=function(e){var t=e.actionPermissions.canAdd;return(0,P.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,P.jsx)(F,{}),(0,P.jsx)(V.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,P.jsx)(w.zx,{block:!0,size:"sm",icon:(0,P.jsx)(R.H_7,{}),children:"Export"})}),(0,P.jsx)(V.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/masterDataMenu-pages-add",children:(0,P.jsxs)(w.zx,{block:!0,variant:"solid",disabled:!t,style:{fontStyle:"normal"},className:"flex justify-center pt-[6px] gap-1",size:"sm",children:[(0,P.jsx)("p",{className:"pt-[2px]",children:(0,P.jsx)(R.yEd,{})}),"Add Pages"]})})]})};(0,g.fn)("Pages",x);var U=function(){var e=(0,y.v9)((function(e){return e.auth.user})).permissionsList,t=(0,s.useState)(e.includes("MSDPGEADD")),n=(0,a.Z)(t,2),r=n[0],o=(n[1],(0,s.useState)(e.includes("MSDPGEEDI"))),i=(0,a.Z)(o,2),c=i[0],l=(i[1],(0,s.useState)(e.includes("MSDPGEVIE"))),u=(0,a.Z)(l,2),d=u[0],f=(u[1],(0,s.useState)(e.includes("MSDPGEDEA"))),m=(0,a.Z)(f,2),v=m[0],p=(m[1],(0,s.useState)(e.includes("MSDPGECLO"))),x=(0,a.Z)(p,2),g=x[0],b=(x[1],(0,s.useState)(e.includes("MSDPGEAPP"))),C=(0,a.Z)(b,2),w=C[0],j=(C[1],{canAdd:r,canEdit:c,canClone:g,canView:d,canActivate:v,canApprove:w});return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(h.lG,{className:"h-full mt-4",bodyClass:"h-full",children:[(0,P.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,P.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Pages"}),(0,P.jsx)(G,{actionPermissions:j})]}),(0,P.jsx)(M,{actionPermissions:j})]})})}},20821:function(e,t,n){var a=n(26050),s=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(s,""):e}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48573:function(e,t,n){var a=n(8092),s=n(50072),r=n(42582),o=Math.max,i=Math.min;e.exports=function(e,t,n){var c,l,u,d,f,m,v=0,p=!1,x=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=c,a=l;return c=l=void 0,v=t,d=e.apply(a,n)}function b(e){return v=e,f=setTimeout(w,t),p?h(e):d}function C(e){var n=e-m;return void 0===m||n>=t||n<0||x&&e-v>=u}function w(){var e=s();if(C(e))return y(e);f=setTimeout(w,function(e){var n=t-(e-m);return x?i(n,u-(e-v)):n}(e))}function y(e){return f=void 0,g&&c?h(e):(c=l=void 0,d)}function j(){var e=s(),n=C(e);if(c=arguments,l=this,m=e,n){if(void 0===f)return b(m);if(x)return clearTimeout(f),f=setTimeout(w,t),h(m)}return void 0===f&&(f=setTimeout(w,t)),d}return t=r(t)||0,a(n)&&(p=!!n.leading,u=(x="maxWait"in n)?o(r(n.maxWait)||0,t):u,g="trailing"in n?!!n.trailing:g),j.cancel=function(){void 0!==f&&clearTimeout(f),v=0,c=m=l=f=void 0},j.flush=function(){return void 0===f?d:y(s())},j}},50072:function(e,t,n){var a=n(97009);e.exports=function(){return a.Date.now()}},42582:function(e,t,n){var a=n(20821),s=n(8092),r=n(70152),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=5244.7d33e2fe.chunk.js.map