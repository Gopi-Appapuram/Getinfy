"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4012],{84012:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var s=n(29439),o=n(72791),l=n(87781),a=n(93433),i=n(95273),r=n(92546),c=(0,i.oM)({name:"solutionsList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,s=(0,r.Vk)(e);if(!s.selectedRows.includes(n))return{selectedRows:[].concat((0,a.Z)(s.selectedRows),(0,a.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,s=(0,r.Vk)(e);if(s.selectedRows.includes(n))return{selectedRows:s.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=c.actions,d=u.setSelectedRows,f=u.setSelectedRow,m=u.addRowItem,x=u.removeRowItem,v=(u.toggleDeleteConfirmation,u.setDeleteMode),h=c.reducer,p=n(2121),g=(0,l.UY)({state:h,data:p.ZP}),b=n(69564),C=n(7869),w=n(4942),j=n(74165),S=n(15861),y=n(50662),I=(n(30948),n(16030)),A=n(23532),k=n(57689),N=n(58121),_=n.n(N),D=(n(97892),n(16856)),E=n(78820),T=n(17425),R=n(39126),L=n(54110),z=n(56498),Z=n(53540),V=n(80184),F={ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}},O=function(e){var t,n=e.actionPermissions,l=(0,I.v9)((function(e){return e.solutionsList.data.tableData})),a=l.pageIndex,i=l.pageSize,r=l.sort,c=l.query,u=(l.total,l.sort_field),f=l.order,v=(0,o.useState)(!1),h=(0,s.Z)(v,2),g=h[0],b=h[1],N=(0,o.useState)(""),O=(0,s.Z)(N,2),P=O[0],M=O[1],q=(0,o.useRef)(null),U=(0,I.I0)(),B=(0,I.v9)((function(e){return e.solutionsList.data.loading})),K=(0,I.v9)((function(e){return e.solutionsList.data.ItemList.res})),G=(0,I.v9)((function(e){return e.solutionsList.data.ItemList.total})),H=(0,I.v9)((function(e){return e.auth.user})),Y=H.enterAccount,$=(H.password,H.rememberMe,H.usernameOrEmail,(0,o.useCallback)((function(){U((0,p.Sz)({page:a-1,size:i,sort_field:u||"id",accId:Y,order:f||"desc"}))}),[U,a,i,u,Y,f,g]));(0,o.useEffect)((function(){U(d([])),$()}),[U,$,a,i,r,g]),(0,o.useEffect)((function(){var e;q&&(null===(e=q.current)||void 0===e||e.resetSelected())}),[K]);var Q=function(){var e=(0,S.Z)((0,j.Z)().mark((function e(){var t;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===P.sol_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,z.PV)(P.id,t);case 3:e.sent.data&&("ACTIVE"===t?(b(!1),(0,L.By)("success","Activated successfully")):(b(!1),(0,L.By)("success","Deactivated successfully")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){var t=e.row,s=((0,I.I0)(),(0,A.Z)().textTheme),o=(0,k.s0)(),l="ACTIVE"!=t.sol_status?T.vUq:T.qGf,a="ACTIVE"!=t.sol_status?"green":"rose",i={color:"grey",pointerEvents:"none"},r=(n.canAdd,n.canEdit,n.canView,n.canActivate),c=n.canClone;n.canApprove;return(0,V.jsxs)("div",{className:"flex justify-end text-lg",children:[(0,V.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){o("/catalogue-new-solutions",{state:{data:t,mode:"EDIT"}})},style:c?null:i,children:(0,V.jsx)(D.U$P,{})}),(0,V.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){o("/catalogue-new-solutions",{state:{data:t,mode:"ADD"}})},style:c?null:i,children:(0,V.jsx)(E.$OG,{})}),(0,V.jsx)(y.u,{title:"".concat("ACTIVE"!=t.sol_status?"Activate":"Deactivate"),children:(0,V.jsx)("span",{onClick:function(){b(!0),M(t)},style:r?null:i,className:"cursor-pointer p-1 text-".concat(a,"-800 hover:text-").concat(a,"-800"),children:(0,V.jsx)(l,{})})})]})},W=(0,o.useMemo)((function(){return{pageIndex:a,pageSize:i,sort:r,query:c,total:G}}),[a,i,r,c,G]),X=(0,o.useMemo)((function(){return[{header:"Actions",flex:1,id:"action",cell:function(e){return(0,V.jsx)(J,{row:e.row.original})}},{header:"Solution ID",accessorKey:"sol_unq_id"},{header:"Solution Title",accessorKey:"sol_title"},{header:"No. Of Items",accessorKey:"sol",flex:1,cell:function(e){var t,n=null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original;return(0,V.jsx)("p",{children:null===n||void 0===n?void 0:n.dgl_cat_sol_items.length})}},{header:"Solution Price In USD",accessorKey:"solDisplayItemPrice",flex:1,cell:function(e){var t,n=null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original;return(0,V.jsxs)("p",{children:[null===n||void 0===n?void 0:n.sol_base_price," "," $"]})}},{header:"Description",accessorKey:"sol_desc",cell:function(e){var t,n=null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original,s=(0,Z.ZP)(null===n||void 0===n?void 0:n.sol_desc);return(0,V.jsx)("p",{children:s})}},{header:"Status",accessorKey:"sol_status",flex:1,cell:function(e){var t,n,s,o=e.row.original.sol_status;return(0,V.jsx)("div",{className:"flex items-center",children:(0,V.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=F[o])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=F[o])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===o&&(0,V.jsx)(T.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===o&&(0,V.jsx)(T.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===o&&(0,V.jsx)(R.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(s=F[o])||void 0===s?void 0:s.label]})})}}]}),[]),ee=(0,o.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),s=[];n.forEach((function(e){s.push(e.id)})),U(d(s))}else U(d([]))}),[U]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(C.wQ,{ref:q,columns:X,data:K,loading:B,pagingData:W,onPaginationChange:function(e){var t=_()(W);t.pageIndex=e,U((0,p.N3)(t))},onSelectChange:function(e){var t=_()(W);t.pageSize=Number(e),t.pageIndex=1,U((0,p.N3)(t))},onSort:function(e){var t=_()(W),n=(0,L.TD)(e.key);t.sort_field=n,t.order=e.order,U((0,p.N3)(t))},onCheckBoxChange:function(e,t){U(e?m([t.id]):x(t.id))},onIndeterminateCheckBoxChange:ee,selectable:!0}),(0,V.jsxs)(y.Vq,{isOpen:g,onClose:function(){return b(!1)},children:[(0,V.jsx)("h6",{style:(t={fontStyle:"normal",fontSize:700},(0,w.Z)(t,"fontSize","18px"),(0,w.Z)(t,"color","#212121"),t),children:"ACTIVE"!=P.sol_status?"Activate":"Deactivate"}),(0,V.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,V.jsx)("p",{children:"ACTIVE"!=P.sol_status?" Are you sure you want to activate this solution ?":" Are you sure you want to deactivate this solution ?"}),(0,V.jsxs)("div",{className:"mt-6 text-end",children:[(0,V.jsx)(y.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return b(!1)},children:"No"}),(0,V.jsx)(y.zx,{variant:"solid",onClick:function(){return Q()},children:"Yes"})]})]})]})},P=n(58617),M=n(48573),q=n.n(M),U=function(){var e=(0,I.I0)(),t=(0,o.useRef)(),n=(0,I.v9)((function(e){return e.solutionsList.data.tableData})),s=(0,I.v9)((function(e){return e.auth.user})),l=s.enterAccount,a=(s.password,s.rememberMe,s.usernameOrEmail,q()((function(e){var t=_()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.unq_id=l,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&i(t);"string"===typeof e&&0===e.length&&i(t)}),500));var i=function(t){e((0,p.N3)(t)),e((0,p.Sz)(t))};return(0,V.jsx)(y.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,V.jsx)(P.O6C,{className:"text-lg"}),onChange:function(e){a(e.target.value)}})},B=n(11087),K=function(){return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(y.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,V.jsx)(P.Yv7,{}),onClick:function(){},children:"Filter"})})},G=(n(57070),function(e){var t=e.actionPermissions.canAdd;return(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,V.jsx)(U,{}),(0,V.jsx)(K,{}),(0,V.jsx)(B.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,V.jsx)(y.zx,{block:!0,size:"sm",icon:(0,V.jsx)(P.H_7,{}),children:"Export"})}),(0,V.jsx)(B.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/catalogue-new-solutions",children:(0,V.jsx)(y.zx,{block:!0,variant:"solid",disabled:!t,size:"sm",icon:(0,V.jsx)(P.yEd,{}),children:"Add Solution"})})]})}),H=function(){var e=(0,I.I0)(),t=(0,I.v9)((function(e){return e.solutionsList.state.selectedRows})),n=(0,I.v9)((function(e){return e.solutionsList.state.selectedRow})),s=(0,I.v9)((function(e){return e.solutionsList.state.deleteMode})),o=(0,I.v9)((function(e){return e.solutionsList.data.tableData})),l=function(){e(v("")),"single"===s&&e(f([]))},a=function(){var o=(0,S.Z)((0,j.Z)().mark((function o(){var l,a;return(0,j.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e(v("")),"single"!==s){o.next=7;break}return o.next=4,(0,p.hw)({id:n});case 4:l=o.sent,i(l),e(f([]));case 7:if("batch"!==s){o.next=13;break}return o.next=10,(0,p.hw)({id:t});case 10:a=o.sent,i(a,t.length),e(d([]));case 13:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),i=function(t,n){t&&(e((0,p.Sz)(o)),y.Am.push((0,V.jsxs)(y.P_,{title:"Successfuly Deleted",type:"success",duration:2500,children:["single"===s&&"Solution ","batch"===s&&"".concat(n," Solutions "),"successfuly deleted"]}),{placement:"top-center"}))};return(0,V.jsx)(C.QH,{isOpen:"single"===s||"batch"===s,onClose:l,onRequestClose:l,type:"danger",title:"Delete product",onCancel:l,onConfirm:a,confirmButtonColor:"red-600",children:(0,V.jsx)("p",{children:"Are you sure you want to delete this Solution? All record related to this Solution will be deleted as well. This action cannot be undone."})})};(0,b.fn)("solutionsList",g);var Y=function(){var e=(0,I.v9)((function(e){return e.auth.user})).permissionsList,t=(0,o.useState)(e.includes("CATSOLADD")),n=(0,s.Z)(t,2),l=n[0],a=(n[1],(0,o.useState)(e.includes("CATSOLEDI"))),i=(0,s.Z)(a,2),r=i[0],c=(i[1],(0,o.useState)(e.includes("CATSOLVIE"))),u=(0,s.Z)(c,2),d=u[0],f=(u[1],(0,o.useState)(e.includes("CATSOLDEA"))),m=(0,s.Z)(f,2),x=m[0],v=(m[1],(0,o.useState)(e.includes("CATSOLCLO"))),h=(0,s.Z)(v,2),p=h[0],g=(h[1],(0,o.useState)(e.includes("CATSOLAPP"))),b=(0,s.Z)(g,2),w=b[0],j=(b[1],{canAdd:l,canEdit:r,canClone:p,canView:d,canActivate:x,canApprove:w});return(0,V.jsxs)(C.lG,{className:"h-full",bodyClass:"h-full",children:[(0,V.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,V.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Solutions"}),(0,V.jsx)(G,{actionPermissions:j})]}),(0,V.jsx)(O,{actionPermissions:j}),(0,V.jsx)(H,{})]})}}}]);
//# sourceMappingURL=4012.7f38f036.chunk.js.map