"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[2196],{44630:function(e,s,r){var n=r(29439),l=r(72791);s.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,s=(0,l.useState)(""),r=(0,n.Z)(s,2),i=r[0],t=r[1];return(0,l.useEffect)((function(){if(i){var s=setTimeout((function(){return t("")}),e);return function(){clearTimeout(s)}}}),[i]),[i,t]}},22196:function(e,s,r){r.r(s),r.d(s,{default:function(){return y}});var n=r(74165),l=r(15861),i=r(29439),t=r(72791),a=r(57689),c=r(11087),o=r(50662),d=r(7869),u=r(92506),m=r(80184),f=r(62797),v=r(16030),x=r(78315),h=r(67202),b=(r(763),["VIEW","ADD","CLONE","EDIT","DEACT.","APPR."]),j={publicRole:"",userRole:"",description:""},p=f.Ry().shape({publicRole:f.Z_().required("Please select master role ").nullable(),userRole:f.Z_().required("Please enter user role").nullable()}),g=(0,t.forwardRef)((function(e,s){var r,n,l,c=(0,v.I0)(),f=(0,t.useRef)(),g=(0,a.TH)(),R=null!==(r=g.state)&&void 0!==r&&r.mode?g.state.mode:"ADD",N=null===(n=g.state)||void 0===n?void 0:n.data,_=(0,t.useState)(),k=(0,i.Z)(_,2),y=(k[0],k[1],(0,t.useState)(N?(0,h.GF)(j,N):j)),w=(0,i.Z)(y,2),C=w[0],D=(w[1],(0,t.useState)(!1)),Z=(0,i.Z)(D,2),E=Z[0],A=Z[1],F=(0,t.useState)(""),P=(0,i.Z)(F,2),S=P[0],T=P[1],I=(0,v.v9)((function(e){var s,r;return null===(s=e.myaccountList)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.publicRolesList})),V=(0,v.v9)((function(e){var s,r;return null===(s=e.myaccountList)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.rolePermissions})),M=(0,v.v9)((function(e){return e.auth.user})),q=(M.enterAccount,M.password,M.rememberMe,M.usernameOrEmail,M.acc_mno_parent_unq_id);(0,t.useEffect)((function(){c((0,x.ai)({roleId:S})),c((0,x.jc)({acc_mno_parent_unq_id:q}))}),[c,S,N]);return(0,t.useImperativeHandle)(s,(function(){return{getChildValues:function(){return{fomikRef:f,rolePermissions:V,rowData:N,edit:!!N}}}})),(0,t.useEffect)((function(){"EDIT"===R&&(T(C.publicRole),A(!0))}),[R]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mt-6 bg-gray-50 dark:bg-gray-700 rounded ",children:(0,m.jsx)("div",{className:"bg-gray-50 p-5",children:(0,m.jsx)(d.lG,{className:"h-full",bodyClass:"h-full",divider:!0,children:(0,m.jsx)(u.J9,{innerRef:f,initialValues:C,validationSchema:p,onSubmit:function(e,s){(0,s.setSubmitting)(!0)},children:function(e){var s=e.errors,r=e.touched,n=e.values;e.setFieldValue;return(0,m.jsx)(o.Yb,{children:(0,m.jsxs)("div",{className:"md:grid gap-4 mx-4",children:[(0,m.jsxs)("div",{className:"md:grid grid-cols-2 gap-4",children:[(0,m.jsx)(o.xJ,{label:(0,m.jsxs)("p",{children:["Master Role"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:s.publicRole&&r.publicRole,errorMessage:s.publicRole,children:(0,m.jsx)(u.gN,{name:"publicRole",children:function(e){var s=e.field,r=e.form;return(0,m.jsx)(o.Ph,{placeholder:"Select Master Role",field:s,form:r,options:I,value:null===I||void 0===I?void 0:I.filter((function(e){return e.value===n.publicRole})),onChange:function(e){return function(e,s,r){s.setFieldValue(r.name,e.value),T(e.value),A(!0)}(e,r,s)}})}})}),(0,m.jsx)(o.xJ,{label:(0,m.jsxs)("p",{children:["User Role Title"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:s.userRole&&r.userRole,errorMessage:s.userRole,children:(0,m.jsx)(u.gN,{type:"text",autoComplete:"off",name:"userRole",placeholder:"Enter Role",component:o.II})})]}),(0,m.jsx)(o.xJ,{label:"Description",children:(0,m.jsx)(u.gN,{name:"description",children:function(e){var s=e.field,r=e.form;return(0,m.jsx)(d.LD,{style:{width:"60%"},value:s.value,onChange:function(e){return r.setFieldValue(s.name,e)}})}})})]})})}})})})}),E&&(0,m.jsx)("div",{className:"bg-gray-50 p-5",children:(0,m.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:null===V||void 0===V||null===(l=V.module_dto)||void 0===l?void 0:l.map((function(e,s){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(o.Zb,{className:"rounded-none border-t-4 border-indigo-500 border-r-0 border-b-0 border-l-0",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{className:"text-base font-bold",children:e.title}),(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)(o.XZ,{className:"",disabled:!0}),(0,m.jsx)("p",{className:"text-base font-medium",children:"Select All"})]})]}),(0,m.jsx)("div",{className:"flex",children:(0,m.jsxs)("table",{className:"w-full mt-4",children:[(0,m.jsxs)("thead",{className:"flex md:grid grid-cols-4  h-8 border-b-2 border-zinc-300",children:[(0,m.jsx)("div",{className:"col-span-1",children:(0,m.jsx)("th",{className:""})}),(0,m.jsx)("div",{className:"col-span-3 md:grid grid-cols-6",children:b.map((function(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("th",{className:"col-span-1",children:e})})}))})]}),(0,m.jsx)("tbody",{children:e.sub_module_dto.map((function(e,s){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("tr",{className:"flex justify-between md:grid grid-cols-4 mt-4 border-b-2 border-zinc-300 h-14",children:[(0,m.jsx)("div",{className:"col-span-1",children:(0,m.jsx)("td",{className:"w-24 mr-3",children:e.title})}),(0,m.jsx)("div",{className:"col-span-3 md:grid grid-cols-6",children:e.dgl_permissions_resp_dto.map((function(e,s){return(0,m.jsx)(m.Fragment,{children:s>0?(0,m.jsx)(o.XZ,{className:"col-span-1 ml-5",checked:e.enabled,onChange:function(e){}}):(0,m.jsx)(m.Fragment,{})})}))})]})})}))})]})})]})})}))})})]})})),R=r(88287),N=r(44630),_=r(54110),k=r(37450),y=function(){var e,s,r,d=(0,a.TH)(),u=(0,v.v9)((function(e){return e.auth.user})),f=u.enterAccount,x=(u.password,u.rememberMe,u.usernameOrEmail,null===(e=d.state)||void 0===e?void 0:e.data),h=(0,a.s0)(),b=(0,N.Z)(),j=(0,i.Z)(b,2),p=(j[0],j[1]),y=(0,t.useRef)(),w=null!==d&&void 0!==d&&null!==(s=d.state)&&void 0!==s&&s.mode?null===d||void 0===d||null===(r=d.state)||void 0===r?void 0:r.mode:"ADD",C=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(s){var r,l,i,t,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=y.current.getChildValues(),i=!1,e.next=4,null===(r=l.fomikRef.current)||void 0===r?void 0:r.validateForm().then((function(e){e&&Object.keys(e).length>0&&(l.fomikRef.current.setTouched(e,!0),i=!0)}));case 4:if(i){e.next=25;break}if(t={dgl_roles_dto:{role_name:l.fomikRef.current.values.userRole,status:"ACTIVE",role_desc:l.fomikRef.current.values.description,dgl_acc_mno_id:1,public_role_id:l.fomikRef.current.values.publicRole,permissions:"json string"},dgl_role_permission_request_dto:l.rolePermissions},!0!==l.fomikRef.current.isValid){e.next=24;break}if(!1!==l.edit){e.next=15;break}return e.next=10,(0,R.P6)(t,f);case 10:"success"===(a=e.sent).status&&((0,_.By)("success","Created successfully "),h("/account-menu-item-view-1/userRoles")),"failed"===a.status&&p((0,_.ld)(a)),e.next=22;break;case 15:if(!0!==l.edit){e.next=22;break}return t.dgl_roles_dto.id=l.rowData.id,e.next=19,(0,R.YP)(t,f);case 19:"success"===(c=e.sent).status&&((0,_.By)("success","Updated successfully"),h("/account-menu-item-view-1/userRoles")),"failed"===c.status&&p((0,_.ld)(c));case 22:e.next=25;break;case 24:l.fomikRef.current.handleSubmit();case 25:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),D=[{name:"Accounts"},{name:"My Account",link:"/account-menu-item-view-1/userRoles"},{name:"Create User Roles & Permissions"}];return"EDIT"===w&&(D=[{name:"Accounts"},{name:"My Account",link:"/account-menu-item-view-1/userRoles"},{name:null===x||void 0===x?void 0:x.role_unq_id,link:"/account-menu-item-view-1/userRoles",state:x},{name:"Edit User Roles & Permissions"}]),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:(0,m.jsx)(k.Z,{list:D})}),(0,m.jsx)("div",{className:"mt-5",children:(0,m.jsxs)("h3",{children:["EDIT"===w?"Edit":"Create"," User Roles & Permissions"]})}),(0,m.jsx)("div",{className:"mt-6  bg-gray-50 dark:bg-gray-700 rounded ",children:(0,m.jsx)(g,{ref:y})}),(0,m.jsx)("div",{className:"mt-4 text-right",children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/account-menu-item-view-1/userRoles",children:(0,m.jsx)(o.zx,{className:"mx-2",variant:"solid",style:{backgroundColor:"#4D4D4D"},children:"Cancel"})}),(0,m.jsx)(o.zx,{className:"mx-2",variant:"solid",onClick:C,children:"Submit For Approval"})]})})]})}}}]);
//# sourceMappingURL=2196.3d3cbd19.chunk.js.map