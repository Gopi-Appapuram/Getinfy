"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9715],{26382:function(t,e,n){n.d(e,{Gm:function(){return g},HO:function(){return l},Jr:function(){return c},Su:function(){return o},Xe:function(){return m},e9:function(){return f},lI:function(){return y},rs:function(){return x}});var r=n(74165),a=n(15861),s=n(31114);function c(t){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.Z.fetchData({url:"/account/retail-customers",method:"post",data:e});case 3:return n=t.sent,t.abrupt("return",{status:"success",data:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:"failed",message:(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.data)||t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function o(t){return i.apply(this,arguments)}function i(){return(i=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.Z.fetchData({url:"/account/retail-customers",method:"put",data:e});case 3:return n=t.sent,t.abrupt("return",{status:"success",data:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:"failed",message:(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.data)||t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/retail-customers",method:"get",params:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/retail-customers?id=".concat(e,"&cust_status=").concat(n),method:"patch"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/currency/unq-id/drop-down/".concat(e.enterAccount),method:"get"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/acc-operators/dropdown/".concat(e.enterAccount),method:"get"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/cust-cats/unq-id-acc-type/drop-down/".concat(e.enterAccount,"/RetailCustomer"),method:"get"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.Z.fetchData({url:"/account/doc-pol?page_no=0&page_size=100&sort_feild=id&unq_id=".concat(e),method:"get"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},59715:function(t,e,n){n.r(e),n.d(e,{default:function(){return O}});var r=n(29439),a=n(72791),s=n(87781),c=n(93433),u=n(95273),o=n(92546),i=(0,u.oM)({name:"retailsList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(t,e){t.selectedRows=e.payload},setSelectedRow:function(t,e){t.selectedRow=e.payload},addRowItem:function(t,e){var n=e.payload,r=(0,o.Vk)(t);if(!r.selectedRows.includes(n))return{selectedRows:[].concat((0,c.Z)(r.selectedRows),(0,c.Z)(n))}},removeRowItem:function(t,e){var n=e.payload,r=(0,o.Vk)(t);if(r.selectedRows.includes(n))return{selectedRows:r.selectedRows.filter((function(t){return t!==n}))}},setDeleteMode:function(t,e){t.deleteMode=e.payload}}}),l=i.actions,d=l.setSelectedRows,f=(l.setSelectedRow,l.addRowItem),p=l.removeRowItem,m=(l.toggleDeleteConfirmation,l.setDeleteMode,i.reducer),h=n(9496),x=(0,s.UY)({state:m,data:h.ZP}),v=n(69564),g=n(7869),b=n(58617),y=n(11087),C=n(50662),Z=n(16030),w=n(48573),j=n.n(w),k=n(58121),A=n.n(k),D=n(80184),_=function(){var t=(0,Z.I0)(),e=(0,a.useRef)(),n=(0,Z.v9)((function(t){return t.retailsList.data.tableData})),r=(0,Z.v9)((function(t){return t.auth.user})),s=r.enterAccount,c=(r.password,r.rememberMe,r.usernameOrEmail,j()((function(t){var e=A()(n);e.page_no=n.pageIndex-1,e.page_size=n.pageSize,e.unq_id=s,e.sort_field=n.sort_field,"string"===typeof t&&t.length>1&&u(e);"string"===typeof t&&0===t.length&&u(e)}),500));var u=function(e){t((0,h.N3)(e)),t((0,h.AU)(e))};return(0,D.jsx)(C.II,{ref:e,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,D.jsx)(b.O6C,{className:"text-lg"}),onChange:function(t){c(t.target.value)}})},I=function(){return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(C.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,D.jsx)(b.Yv7,{}),onClick:function(){},children:"Filter"})})},N=n(16856),E=function(t){var e=t.actionPermissions.canAdd;return(0,D.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,D.jsx)(_,{}),(0,D.jsx)(I,{}),(0,D.jsx)(y.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,D.jsx)(C.zx,{block:!0,size:"sm",icon:(0,D.jsx)(b.H_7,{}),children:"Export"})}),(0,D.jsx)(y.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,D.jsx)(C.zx,{block:!0,size:"sm",icon:(0,D.jsx)(N.cgG,{}),children:"Columns"})}),(0,D.jsx)(y.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/account-new-retail",children:(0,D.jsxs)(C.zx,{block:!0,variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},className:"flex justify-center pt-[6px] gap-1",size:"sm",disabled:!e,children:[(0,D.jsx)("p",{className:"pt-[2px]",children:(0,D.jsx)(b.yEd,{})}),"Create"]})})]})},L=n(74165),S=n(15861),R=(n(30948),n(23532)),z=n(57689),T=(n(97892),n(17425)),V=n(78820),P=n(39126),q=n(26382),F=n(54110),U=(n(72482),{ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}}),M=function(t){var e=t.actionPermissions,n=(0,Z.v9)((function(t){return t.retailsList.data.tableData})),s=n.pageIndex,c=n.pageSize,u=n.sort,o=n.query,i=(n.total,n.sort_field),l=n.order,m=(0,Z.v9)((function(t){return t.retailsList.data.loading})),x=(0,Z.v9)((function(t){return t.retailsList.data.orderList.res})),v=(0,Z.v9)((function(t){return t.retailsList.data.orderList.total})),y=(0,a.useState)(!1),w=(0,r.Z)(y,2),j=w[0],k=w[1],_=(0,a.useState)(""),I=(0,r.Z)(_,2),E=I[0],M=I[1],O=(0,a.useRef)(null),B=(0,Z.I0)(),G=(0,Z.v9)((function(t){return t.auth.user})),K=G.enterAccount,H=(G.password,G.rememberMe,G.usernameOrEmail,(0,Z.v9)((function(t){var e,n;return null===(e=t.retailsList)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.parentAccountList}))),Y=function(){var t=(0,S.Z)((0,L.Z)().mark((function t(){var e;return(0,L.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="ACTIVE"===E.cust_status?"IN_ACTIVE":"ACTIVE",t.next=3,(0,q.e9)(E.id,e);case 3:t.sent.data.success&&("ACTIVE"===e?(k(!1),(0,F.By)("success","Activated successfully")):(k(!1),(0,F.By)("success","Deactivated successfully")));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(t){var n=t.row,r=(0,R.Z)().textTheme,a=(0,z.s0)(),s="ACTIVE"!=n.cust_status?"green":"rose",c="ACTIVE"!=n.cust_status?T.vUq:T.qGf,u={color:"grey",pointerEvents:"none"},o=(e.canAdd,e.canEdit),i=e.canView,l=e.canActivate,d=e.canClone;e.canApprove;return(0,D.jsxs)("div",{className:"text-lg",children:[(0,D.jsx)(C.u,{title:"Edit",children:(0,D.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),onClick:function(){a("/account-new-retail/edit",{state:{data:n,mode:"EDIT"}})},style:o?null:u,children:(0,D.jsx)(N.U$P,{})})}),(0,D.jsx)(C.u,{title:"Clone",children:(0,D.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(r),onClick:function(){a("/account-new-retail",{state:{data:n,mode:"ADD"}})},style:d?null:u,children:(0,D.jsx)(V.$OG,{})})}),(0,D.jsx)(C.u,{title:"View",children:(0,D.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),style:i?null:u,children:(0,D.jsx)(b.Vvo,{})})}),(0,D.jsx)(C.u,{title:"".concat("ACTIVE"!=n.cust_status?"Activate":"Deactivate"),children:(0,D.jsx)("span",{className:"cursor-pointer p-1 text-".concat(s,"-800 hover:text-").concat(s,"-800"),onClick:function(){k(!0),M(n)},style:l?null:u,children:(0,D.jsx)(c,{})})})]})};(0,a.useEffect)((function(){B((0,h.hy)(K))}),[]),(0,a.useEffect)((function(){var t=function(){var t=(0,S.Z)((0,L.Z)().mark((function t(){return(0,L.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B((0,h.AU)({page_no:s-1,page_size:c,sort_field:i||"id",unq_id:K,order:l}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),B((0,h.Nq)({enterAccount:K}))}),[j,B,o,K,s,c,i,l]);var $=(0,a.useMemo)((function(){return{pageIndex:s,pageSize:c,sort:u,query:o,total:v}}),[s,c,u,o,v]),J=(0,a.useMemo)((function(){return[{header:"Actions",flex:1,id:"action",cell:function(t){return(0,D.jsx)(X,{row:t.row.original})}},{header:"Cust ID",accessorKey:"cust_unq_id"},{header:"Customer Name",accessorKey:"cust_name"},{header:"Operator",accessorKey:"cust_parent",cell:function(t){var e=t.row.original.cust_parent;return(0,D.jsx)("span",{children:(0,F.ZP)(e,H)})}},{header:"Address",accessorKey:"cust_add_l1"},{header:"Status",accessorKey:"cust_status",flex:1,cell:function(t){var e,n,r,a=t.row.original.cust_status;return(0,D.jsx)("div",{className:"flex items-center",children:(0,D.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(e=U[a])||void 0===e?void 0:e.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=U[a])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===a&&(0,D.jsx)(T.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===a&&(0,D.jsx)(T.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===a&&(0,D.jsx)(P.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(r=U[a])||void 0===r?void 0:r.label]})})}}]}),[H]),Q=(0,a.useCallback)((function(t,e){if(t){var n=e.map((function(t){return t.original})),r=[];n.forEach((function(t){r.push(t.id)})),B(d(r))}else B(d([]))}),[B]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.wQ,{ref:O,columns:J,data:x,loading:m,pagingData:$,onPaginationChange:function(t){var e=A()($);e.pageIndex=t,B((0,h.N3)(e))},onSelectChange:function(t){var e=A()($);e.pageSize=Number(t),e.pageIndex=1,B((0,h.N3)(e))},onSort:function(t){var e=A()($),n=(0,F.TD)(t.key);e.sort_field=n,e.order=t.order,B((0,h.N3)(e))},onCheckBoxChange:function(t,e){B(t?f([e.id]):p(e.id))},onIndeterminateCheckBoxChange:Q,selectable:!0}),(0,D.jsxs)(C.Vq,{isOpen:j,onClose:function(){return k(!1)},children:[(0,D.jsx)("h6",{style:{fontStyle:"normal",fontSize:"18px"},children:"ACTIVE"!=E.cust_status?"Activate":"Deactivate"}),(0,D.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,D.jsx)("p",{children:"ACTIVE"!=E.cust_status?"Are you sure you want to activate this retail customer ?":"Are you sure you want to deactivate this retail customer ?"}),(0,D.jsxs)("div",{className:"mt-6 text-end",children:[(0,D.jsx)(C.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return k(!1)},children:"No"}),(0,D.jsx)(C.zx,{variant:"solid",onClick:function(){return Y()},children:"Yes"})]})]})]})};(0,v.fn)("retailsList",x);var O=function(){var t=(0,Z.v9)((function(t){return t.auth.user})).permissionsList,e=(0,a.useState)(t.includes("ACCRECADD")),n=(0,r.Z)(e,2),s=n[0],c=(n[1],(0,a.useState)(t.includes("ACCRECEDI"))),u=(0,r.Z)(c,2),o=u[0],i=(u[1],(0,a.useState)(t.includes("ACCRECVIE"))),l=(0,r.Z)(i,2),d=l[0],f=(l[1],(0,a.useState)(t.includes("ACCRECDEA"))),p=(0,r.Z)(f,2),m=p[0],h=(p[1],(0,a.useState)(t.includes("ACCRECCLO"))),x=(0,r.Z)(h,2),v=x[0],b=(x[1],(0,a.useState)(t.includes("ACCRECAPP"))),y=(0,r.Z)(b,2),C=y[0],w=(y[1],{canAdd:s,canEdit:o,canClone:v,canView:d,canActivate:m,canApprove:C});return(0,D.jsxs)(g.lG,{className:"h-full",bodyClass:"h-full",children:[(0,D.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Retail Customers"}),(0,D.jsx)(E,{actionPermissions:w})]}),(0,D.jsx)(M,{actionPermissions:w})]})}},9496:function(t,e,n){n.d(e,{AU:function(){return i},N3:function(){return x},Nq:function(){return d},fY:function(){return f},hy:function(){return p},zC:function(){return l}});var r,a=n(4942),s=n(74165),c=n(15861),u=n(95273),o=n(26382),i=(0,u.hg)("retailsList/data/getOrders",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.HO)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l=(0,u.hg)("salesProductList/data/getCurrency",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.Xe)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d=(0,u.hg)("salesProductList/data/getParentAccount",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.rs)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f=(0,u.hg)("salesProductList/data/getCustCategory",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.Gm)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),p=(0,u.hg)("retailsList/data/getUploadFileType",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.lI)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m=(0,u.oM)({name:"retailsList/data",initialState:{loading:!1,orderList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},currencyList:[],custmoerCatList:[],parentAccountList:[]},reducers:{setOrderList:function(t,e){t.orderList=e.payload},setTableData:function(t,e){t.tableData=e.payload},setCurrencyData:function(t,e){t.currencyList=e.payload},setParentAccountData:function(t,e){t.parentAccountList=e.payload},setCustmoerCattData:function(t,e){t.custmoerCatList=e.payload}},extraReducers:(r={},(0,a.Z)(r,i.fulfilled,(function(t,e){t.orderList=e.payload,t.tableData.total=e.payload.total,t.loading=!1})),(0,a.Z)(r,i.pending,(function(t){t.loading=!0})),(0,a.Z)(r,l.fulfilled,(function(t,e){var n;t.currencyList=null===(n=e.payload.response)||void 0===n?void 0:n.map((function(t){return{value:t.id,label:t.cur_title}})),t.loading=!1})),(0,a.Z)(r,l.pending,(function(t){t.loading=!0})),(0,a.Z)(r,d.fulfilled,(function(t,e){var n;t.parentAccountList=null===(n=e.payload)||void 0===n?void 0:n.map((function(t){return{value:t.id,label:t.acc_name}})),t.loading=!1})),(0,a.Z)(r,d.pending,(function(t){t.loading=!0})),(0,a.Z)(r,f.fulfilled,(function(t,e){var n;t.custmoerCatList=null===(n=e.payload.response)||void 0===n?void 0:n.map((function(t){return{value:t.id,label:t.cust_cat_title}})),t.loading=!1})),(0,a.Z)(r,f.pending,(function(t){t.loading=!0})),(0,a.Z)(r,p.fulfilled,(function(t,e){t.fileList=e.payload,t.loading=!1})),(0,a.Z)(r,p.pending,(function(t){t.loading=!0})),r)}),h=m.actions,x=(h.setOrderList,h.setTableData);h.setCurrencyData,h.setParentAccountData,h.setCustmoerCattData;e.ZP=m.reducer}}]);
//# sourceMappingURL=9715.959b03c7.chunk.js.map