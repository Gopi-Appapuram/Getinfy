(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[6826],{19450:function(t,e,n){"use strict";n.d(e,{Hs:function(){return x},NW:function(){return o},Q2:function(){return f},_r:function(){return m},aq:function(){return l},xT:function(){return i}});var r=n(74165),a=n(15861),c=n(31114);function o(t){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.Z.fetchData({url:"/catalogs/cat-items-info",method:"get",params:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(t){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.Z.fetchData({url:"/account/doc-types",method:"get",params:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.Z.fetchData({url:"/account/doc-types",method:"post",data:e});case 3:return n=t.sent,t.abrupt("return",{status:"success",data:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:"failed",message:(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.data)||t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function f(t){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.Z.fetchData({url:"/account/doc-types/".concat(e.id),method:"put",data:e});case 3:return n=t.sent,t.abrupt("return",{status:"success",data:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:"failed",message:(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a?void 0:a.data)||t.t0.toString()});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function m(t,e){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.Z.fetchData({url:"/account/doc-types?id=".concat(e,"&mdDocTypeStatus=").concat(n),method:"patch"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.Z.fetchData({url:"/account/acc-operators/dropdown/".concat(e.enterAccount),method:"get"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},26826:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var r=n(29439),a=n(72791),c=n(87781),o=n(93433),s=n(95273),i=n(92546),u=(0,s.oM)({name:"doctypeList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(t,e){t.selectedRows=e.payload},setSelectedRow:function(t,e){t.selectedRow=e.payload},addRowItem:function(t,e){var n=e.payload,r=(0,i.Vk)(t);if(!r.selectedRows.includes(n))return{selectedRows:[].concat((0,o.Z)(r.selectedRows),(0,o.Z)(n))}},removeRowItem:function(t,e){var n=e.payload,r=(0,i.Vk)(t);if(r.selectedRows.includes(n))return{selectedRows:r.selectedRows.filter((function(t){return t!==n}))}},setDeleteMode:function(t,e){t.deleteMode=e.payload}}}),l=u.actions,d=l.setSelectedRows,f=(l.setSelectedRow,l.addRowItem),p=l.removeRowItem,m=(l.toggleDeleteConfirmation,l.setDeleteMode,u.reducer),v=n(49516),x=(0,c.UY)({state:m,data:v.ZP}),h=n(69564),y=n(7869),g=n(58617),b=n(50662),w=n(16030),D=n(48573),Z=n.n(D),C=n(58121),j=n.n(C),T=n(80184),k=function(){var t=(0,w.I0)(),e=(0,a.useRef)(),n=(0,w.v9)((function(t){return t.auth.user})),r=n.enterAccount,c=(n.password,n.rememberMe,n.usernameOrEmail,(0,w.v9)((function(t){return t.doctypeList.data.tableData}))),o=Z()((function(t){var e=j()(c);e.page_no=c.pageIndex-1,e.page_size=c.pageSize,e.unq_id=r,e.sort_field=c.sort_field,"string"===typeof t&&t.length>1&&s(e);"string"===typeof t&&0===t.length&&s(e)}),500);var s=function(e){t((0,v.N3)(e)),t((0,v.W9)(e))};return(0,T.jsx)(b.II,{ref:e,className:"lg:w-52",size:"sm",placeholder:"Search Doc Type",prefix:(0,T.jsx)(g.O6C,{className:"text-lg"}),onChange:function(t){o(t.target.value)}})},I=n(11087),_=function(){return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(b.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,T.jsx)(g.Yv7,{}),onClick:function(){},children:"Filter"})})},N=function(t){var e=t.actionPermissions.canAdd;return(0,T.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,T.jsx)(k,{}),(0,T.jsx)(_,{}),(0,T.jsx)(I.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,T.jsx)(b.zx,{block:!0,size:"sm",icon:(0,T.jsx)(g.H_7,{}),children:"Export"})}),(0,T.jsx)(I.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/create-document-type",children:(0,T.jsxs)(b.zx,{block:!0,disabled:!e,className:"flex justify-center pt-[6px] gap-1",variant:"solid",size:"sm",children:[(0,T.jsx)("p",{className:"pt-[2px]",children:(0,T.jsx)(g.yEd,{})}),"Add Doc Type"]})})]})},A=n(74165),S=n(15861),E=n(23532),L=n(57689),R=(n(97892),n(16856)),V=n(17425),M=n(39126),O=n(19450),z=n(54110),F={ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}},q=function(t){var e=t.actionPermissions,n=(0,a.useState)(!1),c=(0,r.Z)(n,2),o=c[0],s=c[1],i=(0,a.useState)(""),u=(0,r.Z)(i,2),l=u[0],m=u[1],x=(0,a.useRef)(null),h=function(t){var n=t.row,r=((0,w.I0)(),(0,E.Z)().textTheme),c=(0,L.s0)(),o=((0,a.useCallback)((function(){c("/app/sales/Item-details/".concat(n.id))}),[c,n]),"ACTIVE"!==n.md_doc_status?"green":"rose"),i="ACTIVE"!==n.md_doc_status?V.vUq:V.qGf,u={color:"grey",pointerEvents:"none"},l=(e.canAdd,e.canEdit),d=e.canView,f=e.canActivate;e.canClone,e.canApprove;return(0,T.jsxs)("div",{className:"text-lg",children:[(0,T.jsx)(b.u,{title:"Edit",children:(0,T.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),onClick:function(){c("/create-document-type",{state:{data:n,mode:"EDIT"}})},style:l?null:u,children:(0,T.jsx)(R.U$P,{})})}),(0,T.jsx)(b.u,{title:"View",children:(0,T.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),style:d?null:u,children:(0,T.jsx)(g.Vvo,{})})}),(0,T.jsx)(b.u,{title:"".concat("ACTIVE"!==n.md_doc_status?"Activate":"Deactivate"),children:(0,T.jsx)("span",{className:"cursor-pointer p-1 text-".concat(o,"-800 hover:text-").concat(o,"-800"),onClick:function(){s(!0),m(n)},style:f?null:u,children:(0,T.jsx)(i,{})})})]})},D=(0,w.I0)(),Z=(0,w.v9)((function(t){return t.doctypeList.data.tableData})),C=Z.pageIndex,k=Z.pageSize,I=Z.sort,_=Z.query,N=(Z.total,Z.sort_field),q=Z.order,P=(0,w.v9)((function(t){var e;return null===t||void 0===t||null===(e=t.auth)||void 0===e?void 0:e.user})).unq_id,U=(0,w.v9)((function(t){return t.doctypeList.data.loading})),B=(0,w.v9)((function(t){return t.doctypeList.data.DocTypeData})),W=(0,w.v9)((function(t){return t.auth.user})),H=W.enterAccount,K=(W.password,W.rememberMe,W.usernameOrEmail,(0,w.v9)((function(t){var e,n;return null===(e=t.doctypeList)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.parentAccountList}))),$=(0,w.v9)((function(t){return t.doctypeList.data.tableData.total})),G=(0,a.useCallback)((function(){}),[]);(0,a.useEffect)((function(){D(d([]));var t=function(){var t=(0,S.Z)((0,A.Z)().mark((function t(){return(0,A.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D((0,v.W9)({page_no:C-1,page_size:k,unqId:P,sort_field:N||"id",order:q}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[D,G,C,k,_,I,o,H,N,q,P]);var J=(0,a.useMemo)((function(){return{pageIndex:C,pageSize:k,sort:I,query:_,total:$}}),[C,k,I,_,$]);(0,a.useEffect)((function(){var t;x&&(null===(t=x.current)||void 0===t||t.resetSelected())}),[B]);var Y=(0,a.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(t){return(0,T.jsx)(h,{row:t.row.original})}},{header:"Operator",accessorKey:"acc_name"},{header:"Document Title",accessorKey:"doc_type_title"},{header:"Allowed File Formats",accessorKey:"allow_file_format",cell:function(t){var e=t.row.original.allow_file_format,n=null===JSON||void 0===JSON?void 0:JSON.parse(e),r=null===Object||void 0===Object?void 0:Object.keys(n).filter((function(t){return n[t]}));return(0,T.jsx)("span",{children:r.join(", ")})}},{header:"Status",accessorKey:"md_doc_status",flex:1,cell:function(t){var e,n,r,a=t.row.original.md_doc_status;return(0,T.jsx)("div",{className:"flex items-center",children:(0,T.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(e=F[a])||void 0===e?void 0:e.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=F[a])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===a&&(0,T.jsx)(V.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===a&&(0,T.jsx)(V.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===a&&(0,T.jsx)(M.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(r=F[a])||void 0===r?void 0:r.label]})})}}]}),[K]),Q=(0,a.useCallback)((function(t,e){if(t){var n=e.map((function(t){return t.original})),r=[];n.forEach((function(t){r.push(t.id)})),D(d(r))}else D(d([]))}),[D]),X=function(){var t=(0,S.Z)((0,A.Z)().mark((function t(){var e;return(0,A.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="ACTIVE"===l.md_doc_status?"IN_ACTIVE":"ACTIVE",t.next=3,(0,O._r)(l.id,e);case 3:t.sent.data.success&&("ACTIVE"===e?(s(!1),(0,z.By)("success","Activated successfully")):(s(!1),(0,z.By)("success","Deactivated successfully")));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(y.wQ,{ref:x,columns:Y,data:B,loading:U,pagingData:J,onPaginationChange:function(t){var e=j()(J);e.pageIndex=t,D((0,v.N3)(e))},onSelectChange:function(t){var e=j()(J);e.pageSize=Number(t),e.pageIndex=1,D((0,v.N3)(e))},onSort:function(t){var e=j()(J),n=(0,z.TD)(t.key);e.sort_field=n,e.order=t.order,D((0,v.N3)(e))},onCheckBoxChange:function(t,e){D(t?f([e.id]):p(e.id))},onIndeterminateCheckBoxChange:Q,selectable:!0}),(0,T.jsxs)(b.Vq,{isOpen:o,onClose:function(){return s(!1)},children:[(0,T.jsx)("h6",{style:{fontStyle:"normal",fontSize:"18px"},children:"ACTIVE"!==l.md_doc_status?"Activate":"Deactivate"}),(0,T.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,T.jsx)("p",{children:"ACTIVE"!==l.md_doc_status?"Are you sure you want to activate this document type ?":"Are you sure you want to deactivate this document type ?"}),(0,T.jsxs)("div",{className:"mt-6 text-end",children:[(0,T.jsx)(b.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return s(!1)},children:"No"}),(0,T.jsx)(b.zx,{variant:"solid",onClick:function(){return X()},children:"Yes"})]})]})]})};(0,h.fn)("doctypeList",x);var P=function(){var t=(0,w.v9)((function(t){return t.auth.user})).permissionsList,e=(0,a.useState)(t.includes("MSDDOCTADD")),n=(0,r.Z)(e,2),c=n[0],o=(n[1],(0,a.useState)(t.includes("MSDDOCTEDI"))),s=(0,r.Z)(o,2),i=s[0],u=(s[1],(0,a.useState)(t.includes("MSDDOCTVIE"))),l=(0,r.Z)(u,2),d=l[0],f=(l[1],(0,a.useState)(t.includes("MSDDOCTDEA"))),p=(0,r.Z)(f,2),m=p[0],v=(p[1],(0,a.useState)(t.includes("MSDDOCTCLO"))),x=(0,r.Z)(v,2),h=x[0],g=(x[1],(0,a.useState)(t.includes("MSDDOCTAPP"))),b=(0,r.Z)(g,2),D=b[0],Z=(b[1],{canAdd:c,canEdit:i,canClone:h,canView:d,canActivate:m,canApprove:D});return(0,T.jsxs)(y.lG,{className:"h-full",bodyClass:"h-full",children:[(0,T.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,T.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Doc Type"}),(0,T.jsx)(N,{actionPermissions:Z})]}),(0,T.jsx)(q,{actionPermissions:Z})]})}},49516:function(t,e,n){"use strict";n.d(e,{N3:function(){return m},Nq:function(){return d},W9:function(){return l}});var r,a=n(4942),c=n(74165),o=n(15861),s=n(95273),i=n(19450),u=(0,s.hg)("doctypeList/data/getItems",function(){var t=(0,o.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.NW)();case 2:return n=t.sent,t.abrupt("return",n.data.response);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l=(0,s.hg)("doctypeList/data/getDocTypeData",function(){var t=(0,o.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.xT)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d=(0,s.hg)("doctypeList/data/getParentAccount",function(){var t=(0,o.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Hs)(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f=(0,s.oM)({name:"doctypeList/data",initialState:{loading:!1,ItemList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:"",sort:{Item:"",key:""}},DocTypeData:[],parentAccountList:[]},reducers:{setItemList:function(t,e){t.ItemList=e.payload},setTableData:function(t,e){t.tableData=e.payload},setDocTypeData:function(t,e){t.DocTypeData=e.payload},setParentAccountData:function(t,e){t.parentAccountList=e.payload}},extraReducers:(r={},(0,a.Z)(r,u.fulfilled,(function(t,e){t.ItemList=e.payload,t.tableData.total=e.payload.total,t.loading=!1})),(0,a.Z)(r,u.pending,(function(t){t.loading=!0})),(0,a.Z)(r,l.fulfilled,(function(t,e){t.DocTypeData=e.payload.res,t.tableData.total=e.payload.total,t.loading=!1})),(0,a.Z)(r,l.pending,(function(t){t.loading=!0})),(0,a.Z)(r,d.fulfilled,(function(t,e){var n;t.parentAccountList=null===(n=e.payload)||void 0===n?void 0:n.map((function(t){return{value:t.id,label:t.acc_name,acc_unq_id:t.acc_unq_id}})),t.loading=!1})),(0,a.Z)(r,d.pending,(function(t){t.loading=!0})),r)}),p=f.actions,m=(p.setItemList,p.setTableData);p.setDocTypeData,p.setParentAccountData;e.ZP=f.reducer},20821:function(t,e,n){var r=n(26050),a=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(a,""):t}},26050:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},48573:function(t,e,n){var r=n(8092),a=n(50072),c=n(42582),o=Math.max,s=Math.min;t.exports=function(t,e,n){var i,u,l,d,f,p,m=0,v=!1,x=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=i,r=u;return i=u=void 0,m=e,d=t.apply(r,n)}function g(t){return m=t,f=setTimeout(w,e),v?y(t):d}function b(t){var n=t-p;return void 0===p||n>=e||n<0||x&&t-m>=l}function w(){var t=a();if(b(t))return D(t);f=setTimeout(w,function(t){var n=e-(t-p);return x?s(n,l-(t-m)):n}(t))}function D(t){return f=void 0,h&&i?y(t):(i=u=void 0,d)}function Z(){var t=a(),n=b(t);if(i=arguments,u=this,p=t,n){if(void 0===f)return g(p);if(x)return clearTimeout(f),f=setTimeout(w,e),y(p)}return void 0===f&&(f=setTimeout(w,e)),d}return e=c(e)||0,r(n)&&(v=!!n.leading,l=(x="maxWait"in n)?o(c(n.maxWait)||0,e):l,h="trailing"in n?!!n.trailing:h),Z.cancel=function(){void 0!==f&&clearTimeout(f),m=0,i=p=u=f=void 0},Z.flush=function(){return void 0===f?d:D(a())},Z}},50072:function(t,e,n){var r=n(97009);t.exports=function(){return r.Date.now()}},42582:function(t,e,n){var r=n(20821),a=n(8092),c=n(70152),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(c(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||i.test(t)?u(t.slice(2),n?2:8):o.test(t)?NaN:+t}}}]);
//# sourceMappingURL=6826.5b0626d7.chunk.js.map