"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[242],{44630:function(e,l,n){var i=n(29439),a=n(72791);l.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,l=(0,a.useState)(""),n=(0,i.Z)(l,2),o=n[0],t=n[1];return(0,a.useEffect)((function(){if(o){var l=setTimeout((function(){return t("")}),e);return function(){clearTimeout(l)}}}),[o]),[o,t]}},80242:function(e,l,n){n.r(l);var i=n(74165),a=n(15861),o=n(29439),t=n(72791),r=n(50662),s=n(92506),c=n(62797),d=n(58617),u=n(57689),m=n(11087),p=n(16030),f=n(78315),x=n(88287),v=n(67202),h=n(54110),y=n(44630),T=n(37450),j=n(7869),b=n(80184),g=[{label:"Operator",value:"Operator"},{label:"Provider",value:"Provider"},{label:"Partner",value:"Partner"},{label:"Enterprise Customer",value:"Enterprise Customer"},{label:"Retail Customer",value:"Retail Customer"}],N=[{label:"5 MB",value:5},{label:"10 MB",value:10},{label:"15 MB",value:15},{label:"20 MB",value:20}],F=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],O={policyTitle:"",accountType:"",filesToBeUploaded:[{docType:"",mandatoryOrOptional:""}],maxFileSize:"",maxNoOfFiles:""},S=c.Ry().shape({policyTitle:c.Z_().required("Please enter policy title").trim().nullable(),accountType:c.Z_().required("Please select an account type").nullable(),maxFileSize:c.Z_().required("Please select a max file size").nullable(),maxNoOfFiles:c.Z_().required("Please select max no.of files allowed").nullable(),filesToBeUploaded:c.IX().of(c.Ry().shape({docType:c.Z_().required("Please select a document type")}))});l.default=function(){var e,l,n=(0,p.I0)(),c=(0,u.s0)(),B=(0,t.useRef)(),C=(0,u.TH)(),D=null!==(e=C.state)&&void 0!==e&&e.mode?C.state.mode:"ADD",U=null===(l=C.state)||void 0===l?void 0:l.data,_=(0,t.useState)(U?(0,v.qZ)(O,U):O),E=(0,o.Z)(_,2),P=E[0],Z=(E[1],(0,y.Z)()),k=(0,o.Z)(Z,2),z=k[0],A=k[1],M=(0,y.Z)(),w=(0,o.Z)(M,2),I=w[0],J=w[1],L=(0,p.v9)((function(e){var l,n;return null===(l=e.myaccountList)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.docTypeDropdownList})),R=(0,p.v9)((function(e){return e.auth.user})),q=R.enterAccount,V=(R.password,R.rememberMe,R.usernameOrEmail,R.acc_mno_id),Y=(0,t.useState)(L),G=(0,o.Z)(Y,2),H=G[0],Q=G[1],W=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(l){var n,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={policy_name:l.policyTitle.trim(),acc_type:l.accountType,doc_type:JSON.stringify(l.filesToBeUploaded.map((function(e){var l,n={};return n.doc_type_id=e.docType,n.doc_type_name=null===(l=L.find((function(l){return l.value===e.docType})))||void 0===l?void 0:l.label,n.is_mandatory="mandatory"===e.mandatoryOrOptional,n}))),dgl_acc_mno:V,status:"ACTIVE",maximum_file_size:l.maxFileSize,mximunm_no_of_files:l.maxNoOfFiles},"ADD"!==D){e.next=8;break}return e.next=4,(0,x.ql)(n);case 4:"success"===(a=e.sent).status?((0,h.By)("success","Created successfully "),c("/account-menu-item-view-1/documents")):"failed"===a.status&&A((0,h.ld)(a)),e.next=14;break;case 8:if("EDIT"!==D){e.next=14;break}return n.id=U.id,e.next=12,(0,x.EP)(n);case 12:"success"===(o=e.sent).status?((0,h.By)("success","Updated successfully"),c("/account-menu-item-view-1/documents")):"failed"===o.status&&A((0,h.ld)(o));case 14:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){n((0,f.Jl)(q))}),[]),(0,t.useEffect)((function(){null!==L&&void 0!==L&&L.length&&Q(L)}),[L]);var X=[{name:"Accounts"},{name:"My Account",link:"/account-menu-item-view-1/documents"},{name:"Create Document Policy"}];return"EDIT"===D&&(X=[{name:"Accounts"},{name:"My Account",link:"/account-menu-item-view-1/documents"},{name:null===U||void 0===U?void 0:U.policy_name,link:"/account-menu-item-view-1/documents",state:U},{name:"Edit Document Policy"}]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(T.Z,{list:X})}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("h3",{children:["EDIT"===D?"Edit":"Create"," Document Policy"]}),z&&(0,b.jsx)(r.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:z}),(0,b.jsx)("div",{children:(0,b.jsx)(s.J9,{innerRef:B,initialValues:P,validationSchema:S,onSubmit:function(e,l){(0,l.setSubmitting)(!0),W(e)},children:function(e){var l=e.values,n=e.touched,i=e.errors;e.isSubmitting;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(s.l0,{children:[(0,b.jsx)("div",{style:{backgroundColor:"#F5F5F5",padding:"15px 15px 15px 15px",marginTop:"10px"},children:(0,b.jsx)(r.Yb,{children:(0,b.jsxs)(j.lG,{className:"h-full p-4",bodyClass:"h-full",children:[(0,b.jsx)("h5",{className:"mb-2 ml-4 mb-5",children:"BASIC DETAILS"}),(0,b.jsxs)("div",{className:"md:grid grid-cols-4 gap-6 mx-4 ",children:[(0,b.jsx)(r.xJ,{label:(0,b.jsxs)("p",{children:["Policy Title ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.policyTitle&&n.policyTitle,errorMessage:i.policyTitle,children:(0,b.jsx)(s.gN,{type:"text",autoComplete:"off",name:"policyTitle",placeholder:"Enter Policy Title",component:r.II})}),(0,b.jsx)(r.xJ,{label:(0,b.jsxs)("p",{children:["Account Type ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.accountType&&n.accountType,errorMessage:i.accountType,children:(0,b.jsx)(s.gN,{name:"accountType",children:function(e){var n=e.field,i=e.form;return(0,b.jsx)(r.Ph,{placeholder:"Select Account Type",field:n,form:i,options:g,value:null===g||void 0===g?void 0:g.filter((function(e){return e.value===l.accountType})),onChange:function(e){return i.setFieldValue(n.name,e.value)}})}})})]}),(0,b.jsx)("hr",{style:{border:"dotted 1px solid gray",marginLeft:"13px",marginRight:"13px"}}),(0,b.jsx)("h5",{className:"ml-4 mt-4 mb-5",children:"FILES TO BE UPLOADED"}),(0,b.jsx)(s.F2,{name:"filesToBeUploaded",children:function(e){var a=e.push,o=e.remove;return(0,b.jsx)("div",{children:l.filesToBeUploaded.map((function(e,t){var c,u;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(r.Yb,{children:(0,b.jsxs)("div",{className:"md:grid grid-cols-4 gap-4 mx-4 mt-2",children:[(0,b.jsxs)(r.xJ,{label:(0,b.jsxs)("p",{children:["Document Type ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.docType&&n.docType,errorMessage:i.docType,children:[(0,b.jsx)(s.gN,{name:"filesToBeUploaded[".concat(t,"].docType"),children:function(e){var n=e.field,i=e.form;return(0,b.jsx)(r.Ph,{placeholder:"Select Document Type",field:n,form:i,options:L,value:null===L||void 0===L?void 0:L.filter((function(e){return e.value===l.filesToBeUploaded[t].docType})),onChange:function(e){return function(e,l,n,i){e.filesToBeUploaded.some((function(e){return e.docType===i.value}))||l.setFieldValue(n.name,i.value)}(l,i,n,e)}})}}),n.filesToBeUploaded&&n.filesToBeUploaded[t]&&i.filesToBeUploaded&&(null===(c=i.filesToBeUploaded[t])||void 0===c?void 0:c.docType)&&(0,b.jsx)("div",{style:{color:"red"},children:null===(u=i.filesToBeUploaded[t])||void 0===u?void 0:u.docType})]}),(0,b.jsx)(r.xJ,{invalid:i.mandatoryOrOptional&&n.mandatoryOrOptional,errorMessage:i.mandatoryOrOptional,children:(0,b.jsx)(s.gN,{name:"filesToBeUploaded[".concat(t,"].mandatoryOrOptional"),children:function(e){var l=e.field,n=e.form;return(0,b.jsx)("div",{className:"mt-10",children:(0,b.jsxs)(r.Y8.Group,{value:l.value,onChange:function(e){return n.setFieldValue(l.name,e)},children:[(0,b.jsx)(r.Y8,{value:"mandatory",children:"Mandatory"}),(0,b.jsx)(r.Y8,{value:"optional",children:"Optional"})]})})}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.zx,{className:"mt-8 border-cyan-500",shape:"circle",size:"md",type:"button",icon:(0,b.jsx)(d.b9W,{}),onClick:function(){return function(e,l,n){if(L.length>e.filesToBeUploaded.length)if(""!==e.filesToBeUploaded[l].docType){var i=H.filter((function(n){return n.value!=e.filesToBeUploaded[l].docType}));Q(i),n({docType:"",mandatoryOrOptional:"optional",isChecked:"true"})}else J("Select ".concat(l+1," Document Type"));else J("Choosen ".concat(L.length," Document Types"))}(l,t,a)},disabled:t<l.filesToBeUploaded.length-1}),l.filesToBeUploaded.length>1&&(0,b.jsx)(r.zx,{className:"mx-4 mt-8 border-red-500",shape:"circle",size:"md",type:"button",icon:(0,b.jsx)(d.bQR,{}),onClick:function(){return function(e,l,n){L.find((function(n){return n.value===e.filesToBeUploaded[l].docType})),n(l)}(l,t,o)}})]})]})})})}))})}}),I&&(0,b.jsx)(r.bZ,{className:"mb-4",type:"info",showIcon:!0,children:I}),(0,b.jsx)("hr",{style:{border:"dotted 1px solid gray",marginLeft:"13px",marginRight:"13px"}}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h5",{className:"mb-2 ml-4 mb-5",children:"ADDITIONAL FILE SETTINGS"}),(0,b.jsxs)("div",{className:"md:grid grid-cols-4 gap-6 mx-4 ",children:[(0,b.jsx)(r.xJ,{label:(0,b.jsxs)("p",{children:["Maximum File Size Allowed ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.maxFileSize&&n.maxFileSize,errorMessage:i.maxFileSize,children:(0,b.jsx)(s.gN,{name:"maxFileSize",children:function(e){var n=e.field,i=e.form;return(0,b.jsx)(r.Ph,{placeholder:"Select Maximum File Size",field:n,form:i,options:N,value:null===N||void 0===N?void 0:N.filter((function(e){return e.value===l.maxFileSize})),onChange:function(e){return i.setFieldValue(n.name,e.value)}})}})}),(0,b.jsx)(r.xJ,{label:(0,b.jsxs)("p",{children:["Maximum No. of Files Allowed ",(0,b.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:i.maxNoOfFiles&&n.maxNoOfFiles,errorMessage:i.maxNoOfFiles,children:(0,b.jsx)(s.gN,{name:"maxNoOfFiles",children:function(e){var n=e.field,i=e.form;return(0,b.jsx)(r.Ph,{placeholder:"Select Maximum No. Of File ",field:n,form:i,options:F,value:null===F||void 0===F?void 0:F.filter((function(e){return e.value===l.maxNoOfFiles})),onChange:function(e){return i.setFieldValue(n.name,e.value)}})}})})]})]})]})})}),(0,b.jsxs)("div",{className:"mt-4 text-right",children:[(0,b.jsx)(m.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/account-menu-item-view-1/documents",children:(0,b.jsx)(r.zx,{className:"mx-2",variant:"solid",style:{backgroundColor:"#4D4D4D"},children:"Cancel"})}),(0,b.jsx)(r.zx,{type:"submit",className:"mx-2",variant:"solid",children:"Submit For Approval"})]})]})})}})})]})]})}}}]);
//# sourceMappingURL=242.c32cc38d.chunk.js.map