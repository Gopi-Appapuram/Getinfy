"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7408],{97408:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var s=n(29439),a=n(72791),i=n(61483),r=n(69564),l=n(7869),c=n(74165),o=n(15861),u=n(50662),d=n(58617),m=(n(30948),n(16030)),x=n(55230),f=n(60128),v=n(23532),h=n(57689),p=n(58121),g=n.n(p),b=(n(97892),n(16856)),C=n(78820),j=n(17425),I=n(39126),y=(n(18271),n(54110)),A=n(21454),k=n(80184),T={ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}},w=function(e){var t=e.actionPermissions,n=(0,a.useState)(!1),i=(0,s.Z)(n,2),r=i[0],p=i[1],w=(0,a.useState)(""),N=(0,s.Z)(w,2),E=N[0],_=N[1],S=(0,a.useRef)(null),D=(0,m.I0)(),V=(0,m.v9)((function(e){return e.itemsList.data.tableData})),z=V.pageIndex,F=V.pageSize,Z=V.sort,L=V.query,M=(V.total,V.order),P=(0,m.v9)((function(e){var t,n,s;return null===(t=e.itemsList)||void 0===t||null===(n=t.data)||void 0===n||null===(s=n.itemTableData)||void 0===s?void 0:s.total})),q=(0,m.v9)((function(e){return e.itemsList.data.loading})),B=(0,m.v9)((function(e){return e.auth.user})),U=B.unq_id,K=(B.role_name,B.enterAccount,(0,m.v9)((function(e){var t,n,s;return null===(t=e.itemsList)||void 0===t||null===(n=t.data)||void 0===n||null===(s=n.itemTableData)||void 0===s?void 0:s.res}))),R=(0,a.useCallback)((function(){D((0,x.wU)({page:z-1,size:F,accId:U,order:M}))}),[D,z,F,U,M,r]);(0,a.useEffect)((function(){D((0,f.pY)([])),R()}),[D,r,z,F,Z,M]),(0,a.useEffect)((function(){var e;S&&(null===(e=S.current)||void 0===e||e.resetSelected())}),[K]);var Y=(0,a.useMemo)((function(){return{pageIndex:z,pageSize:F,sort:Z,query:L,total:P}}),[z,F,Z,L,P]),O=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===E.item_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,A.tu)(E.id,t);case 3:e.sent.data.success&&("ACTIVE"===t?(p(!1),(0,y.By)("success","Activated successfully")):(p(!1),(0,y.By)("success","Deactivated successfully")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){var n=e.row,s=((0,m.I0)(),(0,v.Z)().textTheme),i=(0,h.s0)(),r=((0,a.useCallback)((function(){i("/app/sales/Item-details/".concat(n.id))}),[i,n]),"ACTIVE"!=n.item_status?"green":"rose"),l="ACTIVE"!=n.item_status?j.vUq:j.qGf,c={color:"grey",pointerEvents:"none"},o=(t.canAdd,t.canEdit),x=t.canView,f=t.canActivate,g=t.canClone;t.canApprove;return(0,k.jsxs)("div",{className:"text-lg",children:[(0,k.jsx)(u.u,{title:"Edit",children:(0,k.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),onClick:function(){i("/catalogue-new-items",{state:{data:n,mode:"EDIT"}})},style:o?null:c,children:(0,k.jsx)(b.U$P,{})})}),(0,k.jsx)(u.u,{title:"Clone",children:(0,k.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){i("/catalogue-new-items",{state:{data:n,mode:"ADD"}})},style:g?null:c,children:(0,k.jsx)(C.$OG,{})})}),(0,k.jsx)(u.u,{title:"View",children:(0,k.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),style:x?null:c,children:(0,k.jsx)(d.Vvo,{})})}),(0,k.jsx)(u.u,{title:"".concat("ACTIVE"!=n.item_status?"Activate":"Deactivate"),children:(0,k.jsx)("span",{onClick:function(){p(!0),_(n)},className:"cursor-pointer p-1 text-".concat(r,"-800 hover:text-").concat(r,"-800"),style:f?null:c,children:(0,k.jsx)(l,{})})})]})},H=(0,a.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(e){return(0,k.jsx)(G,{row:e.row.original})}},{header:"Item Id",accessorKey:"item_unq_id"},{header:"Item Title",accessorKey:"item_title",cell:function(e){var t=e.row.original.item_title;return(0,k.jsx)("div",{className:"max-w-sm truncate",children:t})}},{header:"Item Category",accessorKey:"item_type",cell:function(e){var t=e.row.original.item_type;return(0,k.jsxs)(k.Fragment,{children:["P"===t&&(0,k.jsx)("p",{children:"Product"}),"D"===t&&(0,k.jsx)("p",{children:"Data Plan"}),"S"===t&&(0,k.jsx)("p",{children:"Service Plan"})]})}},{header:"Item Added By",accessorKey:"item_provider_id"},{header:"Template",accessorKey:"tp",cell:function(e){var t=e.row.original.dgl_cat_tp_info;return(0,k.jsx)("p",{children:(null===t||void 0===t?void 0:t.tp_title)||""})}},{header:"Status",accessorKey:"prefSettleType",flex:1,cell:function(e){var t,n,s,a=e.row.original.item_status;return(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=T[a])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=T[a])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===a&&(0,k.jsx)(j.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===a&&(0,k.jsx)(j.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===a&&(0,k.jsx)(I.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(s=T[a])||void 0===s?void 0:s.label]})})}}]}),[]),$=(0,a.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),s=[];n.forEach((function(e){s.push(e.id)})),D((0,f.pY)(s))}else D((0,f.pY)([]))}),[D]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.wQ,{ref:S,columns:H,data:K,loading:q,pagingData:Y,onPaginationChange:function(e){var t=g()(Y);t.pageIndex=e,D((0,x.N3)(t))},onSelectChange:function(e){var t=g()(Y);t.pageSize=Number(e),t.pageIndex=1,D((0,x.N3)(t))},onSort:function(e){var t=g()(Y),n=(0,y.TD)(e.key);t.sort_field=n,t.order=e.order,D((0,x.N3)(t))},onCheckBoxChange:function(e,t){D(e?(0,f.mI)([t.id]):(0,f.B$)(t.id))},onIndeterminateCheckBoxChange:$,selectable:!0}),(0,k.jsxs)(u.Vq,{isOpen:r,onClose:function(){return p(!1)},children:[(0,k.jsx)("h6",{style:{fontStyle:"normal",fontWeight:700,fontSize:"18px",color:"#212121"},children:"ACTIVE"!=E.item_status?"Activate":"Deactivate"}),(0,k.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,k.jsx)("p",{style:{fontStyle:"normal",fontWeight:400,fontSize:"15px",color:"#333333"},children:"ACTIVE"!=E.item_status?"Are you sure you want to activate this item ?":"Are you sure you want to deactivate this item ?"}),(0,k.jsxs)("div",{className:"mt-6 text-end",children:[(0,k.jsx)(u.zx,{style:{backgroundColor:"#4D4D4D",color:"white",borderRadius:"2px"},className:"mr-3",onClick:function(){return p(!1)},children:"No"}),(0,k.jsx)(u.zx,{variant:"solid",onClick:function(){return O()},children:"Yes"})]})]})]})},N=n(48573),E=n.n(N),_=function(){var e=(0,m.I0)(),t=(0,a.useRef)(),n=(0,m.v9)((function(e){return e.itemsList.data.tableData})),s=E()((function(e){var t=g()(n);t.query=e,t.pageIndex=1,"string"===typeof e&&e.length>1&&i(t);"string"===typeof e&&0===e.length&&i(t)}),500);var i=function(t){e((0,x.N3)(t)),e((0,x.kk)(t))};return(0,k.jsx)(u.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,k.jsx)(d.O6C,{className:"text-lg"}),onChange:function(e){s(e.target.value)}})},S=n(11087),D=function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(u.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,k.jsx)(d.Yv7,{}),onClick:function(){},children:"Filter"})})},V=function(e){var t=e.actionPermissions.canAdd;return(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,k.jsx)(_,{}),(0,k.jsx)(D,{}),(0,k.jsx)(S.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,k.jsx)(u.zx,{block:!0,size:"sm",icon:(0,k.jsx)(d.H_7,{}),children:"Export"})}),(0,k.jsx)(S.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/catalogue-new-items",children:(0,k.jsx)(u.zx,{block:!0,variant:"solid",size:"sm",disabled:!t,icon:(0,k.jsx)(d.yEd,{}),children:"Add Item"})})]})},z=function(){var e=(0,m.I0)(),t=(0,m.v9)((function(e){return e.itemsList.state.selectedRows})),n=(0,m.v9)((function(e){return e.itemsList.state.selectedRow})),s=(0,m.v9)((function(e){return e.itemsList.state.deleteMode})),a=(0,m.v9)((function(e){return e.itemsList.data.tableData})),i=function(){e((0,f.gM)("")),"single"===s&&e((0,f.j3)([]))},r=function(){var a=(0,o.Z)((0,c.Z)().mark((function a(){var i,r;return(0,c.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e((0,f.gM)("")),"single"!==s){a.next=7;break}return a.next=4,(0,x.CV)({id:n});case 4:i=a.sent,d(i),e((0,f.j3)([]));case 7:if("batch"!==s){a.next=13;break}return a.next=10,(0,x.CV)({id:t});case 10:r=a.sent,d(r,t.length),e((0,f.pY)([]));case 13:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),d=function(t,n){t&&(e((0,x.kk)(a)),u.Am.push((0,k.jsxs)(u.P_,{title:"Successfuly Deleted",type:"success",duration:2500,children:["single"===s&&"Item ","batch"===s&&"".concat(n," Items "),"successfuly deleted"]}),{placement:"top-center"}))};return(0,k.jsx)(l.QH,{isOpen:"single"===s||"batch"===s,onClose:i,onRequestClose:i,type:"danger",title:"Delete product",onCancel:i,onConfirm:r,confirmButtonColor:"red-600",children:(0,k.jsx)("p",{children:"Are you sure you want to delete this Item? All record related to this Item will be deleted as well. This action cannot be undone."})})};(0,r.fn)("itemsList",i.Z);var F=function(){var e=(0,m.v9)((function(e){return e.auth.user})).permissionsList,t=(0,a.useState)(e.includes("CATITMADD")),n=(0,s.Z)(t,2),i=n[0],r=(n[1],(0,a.useState)(e.includes("CATITMEDI"))),c=(0,s.Z)(r,2),o=c[0],u=(c[1],(0,a.useState)(e.includes("CATITMVIE"))),d=(0,s.Z)(u,2),x=d[0],f=(d[1],(0,a.useState)(e.includes("CATITMDEA"))),v=(0,s.Z)(f,2),h=v[0],p=(v[1],(0,a.useState)(e.includes("CATITMCLO"))),g=(0,s.Z)(p,2),b=g[0],C=(g[1],(0,a.useState)(e.includes("CATITMAPP"))),j=(0,s.Z)(C,2),I=j[0],y=(j[1],{canAdd:i,canEdit:o,canClone:b,canView:x,canActivate:h,canApprove:I});return(0,k.jsxs)(l.lG,{className:"h-full",bodyClass:"h-full",children:[(0,k.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Items"}),(0,k.jsx)(V,{actionPermissions:y})]}),(0,k.jsx)(w,{actionPermissions:y}),(0,k.jsx)(z,{})]})}}}]);
//# sourceMappingURL=7408.ffb65800.chunk.js.map