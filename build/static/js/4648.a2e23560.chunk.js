"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4648],{54648:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var s=n(29439),a=n(72791),r=n(61803),l=n(69564),c=n(7869),i=n(4942),o=n(74165),u=n(15861),d=n(50662),m=(n(30948),n(16030)),p=n(77641),f=n(90851),x=n(23532),h=n(57689),v=n(58121),b=n.n(v),g=(n(97892),n(78820)),C=n(17425),j=n(39126),y=n(54110),T=n(50726),A=n(53540),I=n(80184),k={ACTIVE:{label:"Active",dotClass:"bg-black-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-blue-400",textClass:"text-black-400",backgroundColor:"bg-[#F5F5F5]"}},E=[{label:"Product",value:"P"},{label:"Data Plan",value:"D"},{label:"Service Plan",value:"S"}],N=function(e){var t,n=e.actionPermissions,r=(0,a.useState)(!1),l=(0,s.Z)(r,2),v=l[0],N=l[1],w=(0,a.useState)(""),S=(0,s.Z)(w,2),_=S[0],D=S[1],Z=(0,a.useRef)(null),V=(0,m.I0)(),z=(0,m.v9)((function(e){return e.templatesList.data.tableData})),F=z.pageIndex,L=z.pageSize,M=z.sort,P=z.query,q=(z.total,z.sort_field),B=z.order,R=(0,m.v9)((function(e){return e.templatesList.data.loading})),O=(0,m.v9)((function(e){return e.templatesList.data.ItemList.res})),K=(0,m.v9)((function(e){return e.templatesList.data.ItemList.total})),U=(0,m.v9)((function(e){return e.auth.user})),Y=U.enterAccount,G=(U.password,U.rememberMe,U.usernameOrEmail,function(e){var t=e.row,s=((0,m.I0)(),(0,x.Z)().textTheme),a=(0,h.s0)(),r="ACTIVE"!=t.tp_status?C.vUq:C.qGf,l="ACTIVE"!=t.tp_status?"green":"rose",c={color:"grey",pointerEvents:"none"},i=(n.canAdd,n.canEdit,n.canView,n.canActivate),o=n.canClone;n.canApprove;return(0,I.jsxs)("div",{className:"flex justify-end text-lg",children:[(0,I.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){a("/catalogue-new-templates",{state:{data:t,mode:"ADD"}})},style:o?null:c,children:(0,I.jsx)(g.$OG,{})}),(0,I.jsx)(d.u,{title:"".concat("ACTIVE"!=t.tp_status?"Activate":"Deactivate"),children:(0,I.jsx)("span",{onClick:function(){N(!0),D(t)},className:"cursor-pointer p-1 text-".concat(l,"-800 hover:text-").concat(l,"-800"),style:i?null:c,children:(0,I.jsx)(r,{})})})]})}),H=(0,a.useCallback)((function(){V((0,p.uR)({page:F-1,size:L,accId:Y,order:B}))}),[V,F,L,q,Y,B,v]);(0,a.useEffect)((function(){V((0,f.pY)([])),H()}),[V,H,F,L,M]),(0,a.useEffect)((function(){var e;Z&&(null===(e=Z.current)||void 0===e||e.resetSelected())}),[O]);var Q=(0,a.useMemo)((function(){return{pageIndex:F,pageSize:L,sort:M,query:P,total:K}}),[F,L,M,P,K]),$=(0,a.useMemo)((function(){return[{header:"Actions",flex:1,id:"action",cell:function(e){return(0,I.jsx)(G,{row:e.row.original})}},{header:"Template ID",accessorKey:"tp_unq_id"},{header:"Template Type",accessorKey:"tp_type",cell:function(e){var t=e.row.original.tp_type;return(0,I.jsx)("span",{children:(0,y.ZP)(t,E)})}},{header:"Template Title",accessorKey:"tp_title"},{header:"Item Category",accessorKey:"rel_prod_cat_name"},{header:"Description",accessorKey:"tp_desc",cell:function(e){var t=e.row.original.tp_desc,n="string"===typeof t?t:String(t);return(0,I.jsx)("span",{children:(0,A.ZP)(n)})}},{header:"Status",accessorKey:"tp_status",flex:1,cell:function(e){var t,n,s,a=e.row.original.tp_status;return(0,I.jsx)("div",{className:"flex items-center",children:(0,I.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=k[a])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=k[a])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===a&&(0,I.jsx)(C.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===a&&(0,I.jsx)(C.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===a&&(0,I.jsx)(j.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(s=k[a])||void 0===s?void 0:s.label]})})}}]}),[]),J=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===_.tp_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,T.Ob)(_.id,t);case 3:e.sent.data&&("ACTIVE"===t?(N(!1),(0,y.By)("success","Activated successfully")):(N(!1),(0,y.By)("success","Deactivated successfully")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=(0,a.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),s=[];n.forEach((function(e){s.push(e.id)})),V((0,f.pY)(s))}else V((0,f.pY)([]))}),[V]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.wQ,{ref:Z,columns:$,data:O,loading:R,pagingData:Q,onPaginationChange:function(e){var t=b()(Q);t.pageIndex=e,V((0,p.N3)(t))},onSelectChange:function(e){var t=b()(Q);t.pageSize=Number(e),t.pageIndex=1,V((0,p.N3)(t))},onSort:function(e){var t=b()(Q),n=(0,y.TD)(e.key);t.sort_field=n,t.order=e.order,V((0,p.N3)(t))},onCheckBoxChange:function(e,t){V(e?(0,f.mI)([t.id]):(0,f.B$)(t.id))},onIndeterminateCheckBoxChange:W,selectable:!0}),(0,I.jsxs)(d.Vq,{isOpen:v,onClose:function(){return N(!1)},children:[(0,I.jsx)("h6",{style:(t={fontStyle:"normal",fontSize:700},(0,i.Z)(t,"fontSize","18px"),(0,i.Z)(t,"color","#212121"),t),children:"ACTIVE"!=_.tp_status?"Activate":"Deactivate"}),(0,I.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,I.jsx)("p",{children:"ACTIVE"!=_.tp_status?"Are you sure you want to activate this Template ?":"Are you sure you want to deactivate this Template ?"}),(0,I.jsxs)("div",{className:"mt-6 text-end",children:[(0,I.jsx)(d.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return N(!1)},children:"No"}),(0,I.jsx)(d.zx,{variant:"solid",onClick:function(){return J()},children:"Yes"})]})]})]})},w=n(58617),S=n(48573),_=n.n(S),D=function(){var e=(0,m.I0)(),t=(0,a.useRef)(),n=(0,m.v9)((function(e){return e.templatesList.data.tableData})),s=_()((function(e){var t=b()(n);t.query=e,t.pageIndex=1,"string"===typeof e&&e.length>1&&r(t);"string"===typeof e&&0===e.length&&r(t)}),500);var r=function(t){e((0,p.N3)(t)),e((0,p.uR)(t))};return(0,I.jsx)(d.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,I.jsx)(w.O6C,{className:"text-lg"}),onChange:function(e){s(e.target.value)}})},Z=n(11087),V=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(d.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,I.jsx)(w.Yv7,{}),onClick:function(){},children:"Filter"})})},z=(n(19755),function(e){var t=e.actionPermissions.canAdd;return(0,I.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,I.jsx)(D,{}),(0,I.jsx)(V,{}),(0,I.jsx)(Z.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,I.jsx)(d.zx,{block:!0,size:"sm",icon:(0,I.jsx)(w.H_7,{}),children:"Export"})}),(0,I.jsx)(Z.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/catalogue-new-templates",children:(0,I.jsx)(d.zx,{block:!0,variant:"solid",disabled:!t,size:"sm",icon:(0,I.jsx)(w.yEd,{}),children:"Create"})})]})}),F=function(){var e=(0,m.I0)(),t=(0,m.v9)((function(e){return e.templatesList.state.selectedRows})),n=(0,m.v9)((function(e){return e.templatesList.state.selectedRow})),s=(0,m.v9)((function(e){return e.templatesList.state.deleteMode})),a=(0,m.v9)((function(e){return e.templatesList.data.tableData})),r=function(){e((0,f.gM)("")),"single"===s&&e((0,f.j3)([]))},l=function(){var a=(0,u.Z)((0,o.Z)().mark((function a(){var r,l;return(0,o.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e((0,f.gM)("")),"single"!==s){a.next=7;break}return a.next=4,(0,p.Nu)({id:n});case 4:r=a.sent,i(r),e((0,f.j3)([]));case 7:if("batch"!==s){a.next=13;break}return a.next=10,(0,p.Nu)({id:t});case 10:l=a.sent,i(l,t.length),e((0,f.pY)([]));case 13:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),i=function(t,n){t&&(e((0,p.uR)(a)),d.Am.push((0,I.jsxs)(d.P_,{title:"Successfuly Deleted",type:"success",duration:2500,children:["single"===s&&"Template ","batch"===s&&"".concat(n," Templates "),"successfuly deleted"]}),{placement:"top-center"}))};return(0,I.jsx)(c.QH,{isOpen:"single"===s||"batch"===s,onClose:r,onRequestClose:r,type:"danger",title:"Delete product",onCancel:r,onConfirm:l,confirmButtonColor:"red-600",children:(0,I.jsx)("p",{children:"Are you sure you want to delete this Template? All record related to this Template will be deleted as well. This action cannot be undone."})})};(0,l.fn)("templatesList",r.Z);var L=function(){var e=(0,m.v9)((function(e){return e.auth.user})).permissionsList,t=(0,a.useState)(e.includes("CATTEMADD")),n=(0,s.Z)(t,2),r=n[0],l=(n[1],(0,a.useState)(e.includes("CATTEMEDI"))),i=(0,s.Z)(l,2),o=i[0],u=(i[1],(0,a.useState)(e.includes("CATTEMVIE"))),d=(0,s.Z)(u,2),p=d[0],f=(d[1],(0,a.useState)(e.includes("CATTEMDEA"))),x=(0,s.Z)(f,2),h=x[0],v=(x[1],(0,a.useState)(e.includes("CATTEMCLO"))),b=(0,s.Z)(v,2),g=b[0],C=(b[1],(0,a.useState)(e.includes("CATTEMAPP"))),j=(0,s.Z)(C,2),y=j[0],T=(j[1],{canAdd:r,canEdit:o,canClone:g,canView:p,canActivate:h,canApprove:y});return(0,I.jsxs)(c.lG,{className:"h-full",bodyClass:"h-full",children:[(0,I.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,I.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Templates"}),(0,I.jsx)(z,{actionPermissions:T})]}),(0,I.jsx)(N,{actionPermissions:T}),(0,I.jsx)(F,{})]})}}}]);
//# sourceMappingURL=4648.a2e23560.chunk.js.map