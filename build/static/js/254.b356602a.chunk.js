"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[254],{19450:function(e,t,a){a.d(t,{Hs:function(){return v},NW:function(){return c},Q2:function(){return p},_r:function(){return m},aq:function(){return u},xT:function(){return l}});var n=a(74165),r=a(15861),i=a(31114);function c(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.fetchData({url:"/catalogs/cat-items-info",method:"get",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.fetchData({url:"/account/doc-types",method:"get",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.fetchData({url:"/account/doc-types",method:"post",data:t});case 3:return a=e.sent,e.abrupt("return",{status:"success",data:a});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"failed",message:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.data)||e.t0.toString()});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.fetchData({url:"/account/doc-types/".concat(t.id),method:"put",data:t});case 3:return a=e.sent,e.abrupt("return",{status:"success",data:a});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"failed",message:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.data)||e.t0.toString()});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(e,t){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.fetchData({url:"/account/doc-types?id=".concat(t,"&mdDocTypeStatus=").concat(a),method:"patch"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.fetchData({url:"/account/acc-operators/dropdown/".concat(t.enterAccount),method:"get"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44630:function(e,t,a){var n=a(29439),r=a(72791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,r.useState)(""),a=(0,n.Z)(t,2),i=a[0],c=a[1];return(0,r.useEffect)((function(){if(i){var t=setTimeout((function(){return c("")}),e);return function(){clearTimeout(t)}}}),[i]),[i,c]}},20254:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(74165),r=a(4942),i=a(1413),c=a(15861),s=a(29439),l=a(72791),o=a(45402),u=a(50662),d=a(49516),p=a(92506),f=a(57689),m=a(11087),h=a(19450),v=a(54110),x=a(44630),_=a(62797),y=a(67202),g=a(16030),b=(a(53540),a(37450)),Z=a(7869),w=a(80184);function j(){var e,t,a=_.Ry().shape({title:_.Z_().trim().required("Please enter document title").nullable()}),j=_.Ry().shape({pdf:_.O7(),image:_.O7(),document:_.O7(),video:_.O7(),audio:_.O7(),spreadsheet:_.O7()}).test("checkbox-required","Please select at least one file type",(function(e){var t=e.pdf,a=e.image,n=e.document,r=e.video,i=e.audio,c=e.spreadsheet;return t||a||n||r||i||c})).nullable(),D={title:"",allow_file_format:{pdf:!1,image:!1,document:!1,video:!1,audio:!1,spreadsheet:!1},description:"",acc_unq_id:""},k=(0,g.I0)(),N=(0,g.v9)((function(e){return e.auth.user})),T=N.enterAccount,q=N.user_type,S=(N.unq_id,(0,x.Z)()),C=(0,s.Z)(S,2),I=C[0],A=C[1],M=(0,f.s0)(),F=(0,l.useRef)(),L=(0,f.TH)(),E=null!==(e=L.state)&&void 0!==e&&e.mode?L.state.mode:"ADD",O=null===(t=L.state)||void 0===t?void 0:t.data,P=O&&O.allow_file_format?JSON.parse(O.allow_file_format):{pdf:!1,image:!1,document:!1,video:!1,audio:!1,spreadsheet:!1},J=(0,l.useState)(P),G=(0,s.Z)(J,2),V=G[0],z=G[1],R=(0,l.useState)((0,y.Dg)(D,O||D)),H=(0,s.Z)(R,2),W=H[0],B=H[1],Q=(0,g.v9)((function(e){var t,a;return null===(t=e.doctypeList)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.parentAccountList}));(0,l.useEffect)((function(){if(O){var e=(0,y.Dg)(W,O);B(e)}}),[W,O]),(0,l.useEffect)((function(){k((0,d.Nq)({enterAccount:T}))}),[k,T]);var U=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},a,t.target.checked))}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){var a,r,i,c,s,l,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={title:t.title,allow_file_format:V,description:t.description},B(a),"ADD"!==E){e.next=12;break}return r=F.current.values,i={doc_type_title:r.title.trim(),allow_file_format:JSON.stringify(a.allow_file_format),doc_type_desc:t.description,md_tax_status:"ACTIVE",md_doc_status:"ACTIVE",unq_id:"GlobalMno"!==q?T:r.acc_unq_id},e.next=7,(0,h.aq)(i);case 7:"success"===(c=e.sent).status&&((0,v.By)("success","Created successfully"),M("/masterDataMenu-item-view-1")),"failed"===c.status&&A((0,v.ld)(c)),e.next=20;break;case 12:if("EDIT"!==E){e.next=20;break}return s=F.current.values,l={id:null===O||void 0===O?void 0:O.id,doc_type_title:s.title.trim(),allow_file_format:JSON.stringify(a.allow_file_format),doc_type_desc:t.description,md_doc_status:null===O||void 0===O?void 0:O.md_doc_status,unq_id:"GlobalMno"!==q?T:s.acc_unq_id},e.next=17,(0,h.Q2)(l);case 17:"success"===(o=e.sent).status&&((0,v.By)("success","Updated successfully"),M("/masterDataMenu-item-view-1")),"failed"===o.status&&A((0,v.ld)(o));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.validate((0,i.Z)({},V));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),X=[{name:"Master Data"},{name:"Doc Type",link:"/masterDataMenu-item-view-1"},{name:"Add Doc Type"}];return"EDIT"===E&&(X=[{name:"Master Data"},{name:"Doc Type",link:"/masterDataMenu-item-view-1"},{name:null===O||void 0===O?void 0:O.doc_type_title,link:"/masterDataMenu-item-view-1",state:O},{name:"Edit Doc Type"}]),(0,w.jsxs)(w.Fragment,{children:[I&&(0,w.jsx)(u.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:I}),(0,w.jsx)("div",{children:(0,w.jsx)(b.Z,{list:X})}),(0,w.jsxs)("div",{className:"mt-5",children:[(0,w.jsxs)("h3",{children:["EDIT"===E?"Edit":"Create"," Document Type"]}),(0,w.jsx)("div",{children:(0,w.jsx)(p.J9,{innerRef:F,initialValues:W,validationSchema:a,onSubmit:Y,children:function(e){var t=e.values,a=e.touched,r=e.errors,i=(e.isSubmitting,e.handleSubmit);return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(p.l0,{onSubmit:i,children:[(0,w.jsx)("div",{style:{backgroundColor:"#F5F5F5",padding:"15px",marginTop:"10px"},children:(0,w.jsx)(u.Yb,{children:(0,w.jsxs)(Z.lG,{className:"h-full p-4",bodyClass:"h-full",children:[(0,w.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,w.jsx)(u.xJ,{label:(0,w.jsxs)("p",{children:["Operator ",(0,w.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:r.acc_unq_id&&a.acc_unq_id,errorMessage:r.acc_unq_id,children:(0,w.jsx)(p.gN,{name:"acc_unq_id",validate:function(){var e=(0,c.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GlobalMno"!==q){e.next=9;break}return e.prev=1,e.next=4,_.Z_().required("Please select operator").validate(t);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.field,n=e.form;return(0,w.jsx)(u.Ph,{isDisabled:"GlobalMno"!==q,placeholder:"Select Operator",field:a,form:n,options:Q,value:"GlobalMno"!==q?null===Q||void 0===Q?void 0:Q.filter((function(e){return e.acc_unq_id===T})):null===Q||void 0===Q?void 0:Q.filter((function(e){return e.acc_unq_id===t.acc_unq_id})),onChange:function(e){return n.setFieldValue(a.name,e.acc_unq_id)}})}})})}),(0,w.jsx)("div",{className:"md:grid grid-cols-2 gap-4",children:(0,w.jsx)(u.xJ,{label:(0,w.jsxs)("p",{children:["Document Title ",(0,w.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:r.title&&a.title,errorMessage:r.title,children:(0,w.jsx)(p.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Document Title",component:u.II})})}),(0,w.jsxs)(u.xJ,{label:(0,w.jsxs)("p",{children:["Allow File Format ",(0,w.jsx)("span",{style:{color:"red"},children:"*"})]}),invalid:a.allow_file_format&&!0!==(V.pdf||V.image||V.document||V.video||V.audio||V.spreadsheet),errorMessage:"Please select at least one file type",children:[(0,w.jsxs)("div",{style:{display:"flex",marginTop:"7px",marginLeft:"3px"},children:[(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5",type:"checkbox",name:"allow_file_format.pdf",checked:V.pdf,onChange:function(e){return U(e,"pdf")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.pdf",className:"mr-4 ml-2",children:"Pdf"})]}),(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5",type:"checkbox",name:"allow_file_format.image",checked:V.image,onChange:function(e){return U(e,"image")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.image",className:"mr-4 ml-2",children:"Image"})]}),(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5",type:"checkbox",name:"allow_file_format.document",checked:V.document,onChange:function(e){return U(e,"document")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.document",className:"mr-4 ml-2",children:"Document"})]})]}),(0,w.jsxs)("div",{style:{display:"flex",marginTop:"2%",marginLeft:"3px"},children:[(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5 ",type:"checkbox",name:"allow_file_format.video",checked:V.video,onChange:function(e){return U(e,"video")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.video",className:"mr-4 ml-2",children:"Video"})]}),(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5",type:"checkbox",name:"allow_file_format.audio",checked:V.audio,onChange:function(e){return U(e,"audio")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.audio",className:"mr-4 ml-2",children:"Audio"})]}),(0,w.jsxs)("p",{className:"flex",children:[(0,w.jsx)(p.gN,{className:"h-5 w-5",type:"checkbox",name:"allow_file_format.spreadsheet",checked:V.spreadsheet,onChange:function(e){return U(e,"spreadsheet")},validate:K}),(0,w.jsx)("label",{htmlFor:"allow_file_format.spreadsheet",className:"ml-2",children:"Spreadsheet"})]})]})]}),(0,w.jsx)("div",{className:"card md:grid grid-cols-2 gap-4  mt-6 ml-2"}),(0,w.jsx)("div",{style:{width:"70%"},className:"ml-2",children:(0,w.jsx)(u.xJ,{label:"Description",children:(0,w.jsx)(p.gN,{name:"description",children:function(e){var t=e.field,a=e.form;return(0,w.jsx)(o.Z,{value:t.value,onChange:function(e){return a.setFieldValue(t.name,e)}})}})})})]})})}),(0,w.jsx)("div",{className:"mt-4 text-right flex justify-end",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/masterDataMenu-item-view-1",children:(0,w.jsx)(u.zx,{className:"mx-2",style:{backgroundColor:"#4D4D4D",fontStyle:"normal",fontSize:"18px"},variant:"solid",children:"Cancel"})}),(0,w.jsx)(u.zx,{onClick:Y,variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},children:"Submit"})]})})]})})}})})]})]})}},49516:function(e,t,a){a.d(t,{N3:function(){return m},Nq:function(){return d},W9:function(){return u}});var n,r=a(4942),i=a(74165),c=a(15861),s=a(95273),l=a(19450),o=(0,s.hg)("doctypeList/data/getItems",function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.NW)();case 2:return a=e.sent,e.abrupt("return",a.data.response);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=(0,s.hg)("doctypeList/data/getDocTypeData",function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.xT)(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=(0,s.hg)("doctypeList/data/getParentAccount",function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Hs)(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=(0,s.oM)({name:"doctypeList/data",initialState:{loading:!1,ItemList:[],tableData:{total:0,pageIndex:1,pageSize:10,query:"",sort:{Item:"",key:""}},DocTypeData:[],parentAccountList:[]},reducers:{setItemList:function(e,t){e.ItemList=t.payload},setTableData:function(e,t){e.tableData=t.payload},setDocTypeData:function(e,t){e.DocTypeData=t.payload},setParentAccountData:function(e,t){e.parentAccountList=t.payload}},extraReducers:(n={},(0,r.Z)(n,o.fulfilled,(function(e,t){e.ItemList=t.payload,e.tableData.total=t.payload.total,e.loading=!1})),(0,r.Z)(n,o.pending,(function(e){e.loading=!0})),(0,r.Z)(n,u.fulfilled,(function(e,t){e.DocTypeData=t.payload.res,e.tableData.total=t.payload.total,e.loading=!1})),(0,r.Z)(n,u.pending,(function(e){e.loading=!0})),(0,r.Z)(n,d.fulfilled,(function(e,t){var a;e.parentAccountList=null===(a=t.payload)||void 0===a?void 0:a.map((function(e){return{value:e.id,label:e.acc_name,acc_unq_id:e.acc_unq_id}})),e.loading=!1})),(0,r.Z)(n,d.pending,(function(e){e.loading=!0})),n)}),f=p.actions,m=(f.setItemList,f.setTableData);f.setDocTypeData,f.setParentAccountData;t.ZP=p.reducer}}]);
//# sourceMappingURL=254.b356602a.chunk.js.map