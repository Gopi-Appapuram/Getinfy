"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[329],{90329:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var s=n(29439),r=n(72791),a=n(87781),c=n(93433),i=n(95273),o=n(92546),l=(0,i.oM)({name:"enterpriseList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,s=(0,o.Vk)(e);if(!s.selectedRows.includes(n))return{selectedRows:[].concat((0,c.Z)(s.selectedRows),(0,c.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,s=(0,o.Vk)(e);if(s.selectedRows.includes(n))return{selectedRows:s.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=l.actions,d=u.setSelectedRows,f=u.setSelectedRow,m=u.addRowItem,x=u.removeRowItem,p=(u.toggleDeleteConfirmation,u.setDeleteMode),h=l.reducer,v=n(72482),C=(0,a.UY)({state:h,data:v.ZP}),g=n(69564),b=n(7869),j=n(4942),w=n(74165),y=n(15861),A=n(50662),k=n(58617),N=(n(30948),n(16030)),I=n(23532),_=n(57689),E=n(58121),S=n.n(E),D=(n(97892),n(16856)),R=n(78820),T=n(17425),Z=n(67615),z=n(39126),V=n(54110),L=n(80184),F={ACTIVE:{label:"Active",dotClass:"bg-black-500",textClass:"text-black-500",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500",backgroundColor:"bg- #F5F5F5"}},M=function(e){var t=e.actionPermissions,n=(0,r.useState)(!1),a=(0,s.Z)(n,2),c=a[0],i=a[1],o=(0,r.useState)(""),l=(0,s.Z)(o,2),u=l[0],f=l[1],p=(0,r.useRef)(null),h=(0,N.I0)(),C=(0,N.v9)((function(e){var t,n;return null===(t=e.enterpriseList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.operatorAccountList})),g=function(){var e=(0,y.Z)((0,w.Z)().mark((function e(){var t;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===u.cust_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,Z.jt)(u.id,t);case 3:e.sent.data.success&&("ACTIVE"===t?(i(!1),(0,V.By)("success","Activated successfully")):(i(!1),(0,V.By)("success","Deactivated successfully")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){var n=e.row,s=((0,N.I0)(),(0,I.Z)().textTheme),a=(0,_.s0)(),c=(0,r.useCallback)((function(){a("/app/sales/order-details/".concat(n.id))}),[a,n]),o="ACTIVE"!=n.cust_status?"green":"rose",l="ACTIVE"!=n.cust_status?T.vUq:T.qGf,u={color:"grey",pointerEvents:"none"},d=(t.canAdd,t.canEdit),m=t.canView,x=t.canActivate,p=t.canClone;t.canApprove;return(0,L.jsxs)("div",{className:"text-lg",children:[(0,L.jsx)(A.u,{title:"Edit",children:(0,L.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),onClick:function(){a("/account-new-enterprise/edit",{state:{data:n,mode:"EDIT"}})},style:d?null:u,children:(0,L.jsx)(D.U$P,{})})}),(0,L.jsx)(A.u,{title:"Clone",children:(0,L.jsx)("span",{className:"cursor-pointer p-1  hover:".concat(s),onClick:function(){a("/account-new-enterprise",{state:{data:n,mode:"ADD"}})},style:p?null:u,children:(0,L.jsx)(R.$OG,{})})}),(0,L.jsx)(A.u,{title:"View",children:(0,L.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(s),onClick:c,style:m?null:u,children:(0,L.jsx)(k.Vvo,{})})}),(0,L.jsx)(A.u,{title:"".concat("ACTIVE"!=n.cust_status?"Activate":"Deactivate"),children:(0,L.jsx)("span",{className:"cursor-pointer p-1 text-".concat(o,"-800 hover:text-").concat(o,"-800"),onClick:function(){i(!0),f(n)},style:x?null:u,children:(0,L.jsx)(l,{})})})]})},M=(0,N.v9)((function(e){return e.enterpriseList.data.tableData})),U=M.pageIndex,q=M.pageSize,P=M.sort,O=M.query,B=(M.total,M.sort_field),K=M.order,G=(0,N.v9)((function(e){return e.enterpriseList.data.loading})),H=((0,N.v9)((function(e){return e.enterpriseList})),(0,N.v9)((function(e){return e.auth.user}))),Y=H.enterAccount,Q=(H.password,H.rememberMe,H.usernameOrEmail,(0,N.v9)((function(e){return e.enterpriseList.data.orderList.res}))),$=(0,N.v9)((function(e){return e.enterpriseList.data.orderList.total}));(0,r.useEffect)((function(){h((0,v.hy)(Y))}),[]),(0,r.useEffect)((function(){var e=function(){var e=(0,y.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h((0,v.AU)({page_no:U-1,page_size:q,sort_field:B||"id",unq_id:Y,order:K}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),h((0,v.si)({enterAccount:Y}))}),[c,h,O,Y,U,q,B,K]);var J=(0,r.useMemo)((function(){return{pageIndex:U,pageSize:q,sort:P,query:O,total:$}}),[U,q,P,O,$]),W=(0,r.useMemo)((function(){return[{header:"Actions",flex:1,id:"action",cell:function(e){return(0,L.jsx)(E,{row:e.row.original})}},{header:"Cust ID",accessorKey:"cust_unq_id"},{header:"Customer Title",accessorKey:"cust_name"},{header:"Operator",accessorKey:"dgl_acc_mno_id",cell:function(e){var t=e.row.original.dgl_acc_mno_id;return(0,L.jsx)("span",{children:(0,V.ZP)(t,C)})}},{header:"Address",accessorKey:"cust_add_l1"},{header:"Credit Limit",accessorKey:"credit_limit"},{header:"Status",accessorKey:"cust_status",flex:1,cell:function(e){var t,n,s,r=e.row.original.cust_status;return(0,L.jsx)("div",{className:"flex items-center",children:(0,L.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=F[r])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=F[r])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===r&&(0,L.jsx)(T.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===r&&(0,L.jsx)(T.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===r&&(0,L.jsx)(z.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(s=F[r])||void 0===s?void 0:s.label]})})}}]}),[C]),X=(0,r.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),s=[];n.forEach((function(e){s.push(e.id)})),h(d(s))}else h(d([]))}),[h]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(b.wQ,{ref:p,columns:W,data:Q,loading:G,pagingData:J,onPaginationChange:function(e){var t=S()(J);t.pageIndex=e,h((0,v.N3)(t))},onSelectChange:function(e){var t=S()(J);t.pageSize=Number(e),t.pageIndex=1,h((0,v.N3)(t))},onSort:function(e){var t=S()(J),n=(0,V.TD)(e.key);t.sort_field=n,t.order=e.order,h((0,v.N3)(t))},onCheckBoxChange:function(e,t){h(e?m([t.id]):x(t.id))},onIndeterminateCheckBoxChange:X,selectable:!0}),(0,L.jsxs)(A.Vq,{isOpen:c,onClose:function(){return i(!1)},children:[(0,L.jsx)("h6",{style:(0,j.Z)({fontStyle:"normal",fontSize:700},"fontSize","18px"),children:"ACTIVE"!=u.cust_status?"Activate":"Deactivate"}),(0,L.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,L.jsx)("p",{children:"ACTIVE"!=u.cust_status?"Are you sure you want to activate this enterprise customer ?":"Are you sure you want to deactivate this enterprise customer  ?"}),(0,L.jsxs)("div",{className:"mt-6 text-end",children:[(0,L.jsx)(A.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return i(!1)},children:"No"}),(0,L.jsx)(A.zx,{variant:"solid",onClick:function(){return g()},children:"Yes"})]})]})]})},U=n(48573),q=n.n(U),P=function(){var e=(0,N.I0)(),t=(0,r.useRef)(),n=(0,N.v9)((function(e){return e.enterpriseList.data.tableData})),s=(0,N.v9)((function(e){return e.auth.user})),a=s.enterAccount,c=(s.password,s.rememberMe,s.usernameOrEmail,q()((function(e){var t=S()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.unq_id=a,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&i(t);"string"===typeof e&&0===e.length&&i(t)}),500));var i=function(t){e((0,v.N3)(t)),e((0,v.AU)(t))};return(0,L.jsx)(A.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,L.jsx)(k.O6C,{className:"text-lg"}),onChange:function(e){c(e.target.value)}})},O=n(11087),B=function(){return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(A.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,L.jsx)(k.Yv7,{}),onClick:function(){},children:"Filter"})})},K=function(e){var t=e.actionPermissions.canAdd;return(0,L.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,L.jsx)(P,{}),(0,L.jsx)(B,{}),(0,L.jsx)(O.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,L.jsx)(A.zx,{block:!0,size:"sm",icon:(0,L.jsx)(k.H_7,{}),children:"Export"})}),(0,L.jsx)(O.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,L.jsx)(A.zx,{block:!0,size:"sm",icon:(0,L.jsx)(D.cgG,{}),children:"Columns"})}),(0,L.jsx)(O.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/account-new-enterprise",children:(0,L.jsxs)(A.zx,{block:!0,variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},className:"flex justify-center pt-[6px] gap-1",size:"sm",disabled:!t,children:[(0,L.jsx)("p",{className:"pt-[2px]",children:(0,L.jsx)(k.yEd,{})}),"Create"]})})]})},G=function(){var e=(0,N.I0)(),t=(0,N.v9)((function(e){return e.enterpriseList.state.selectedRows})),n=(0,N.v9)((function(e){return e.enterpriseList.state.selectedRow})),s=(0,N.v9)((function(e){return e.enterpriseList.state.deleteMode})),r=(0,N.v9)((function(e){return e.enterpriseList.data.tableData})),a=function(){e(p("")),"single"===s&&e(f([]))},c=function(){var r=(0,y.Z)((0,w.Z)().mark((function r(){var a,c;return(0,w.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e(p("")),"single"!==s){r.next=7;break}return r.next=4,(0,v.RT)({id:n});case 4:a=r.sent,i(a),e(f([]));case 7:if("batch"!==s){r.next=13;break}return r.next=10,(0,v.RT)({id:t});case 10:c=r.sent,i(c,t.length),e(d([]));case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),i=function(t,n){t&&(e((0,v.AU)(r)),A.Am.push((0,L.jsxs)(A.P_,{title:"Successfuly Deleted",type:"success",duration:2500,children:["single"===s&&"Order ","batch"===s&&"".concat(n," orders "),"successfuly deleted"]}),{placement:"top-center"}))};return(0,L.jsx)(b.QH,{isOpen:"single"===s||"batch"===s,onClose:a,onRequestClose:a,type:"danger",title:"Delete product",onCancel:a,onConfirm:c,confirmButtonColor:"red-600",children:(0,L.jsx)("p",{children:"Are you sure you want to delete this order? All record related to this order will be deleted as well. This action cannot be undone."})})};(0,g.fn)("enterpriseList",C);var H=function(){var e=(0,N.v9)((function(e){return e.auth.user})).permissionsList,t=(0,r.useState)(e.includes("ACCENCADD")),n=(0,s.Z)(t,2),a=n[0],c=(n[1],(0,r.useState)(e.includes("ACCENCEDI"))),i=(0,s.Z)(c,2),o=i[0],l=(i[1],(0,r.useState)(e.includes("ACCENCVIE"))),u=(0,s.Z)(l,2),d=u[0],f=(u[1],(0,r.useState)(e.includes("ACCENCDEA"))),m=(0,s.Z)(f,2),x=m[0],p=(m[1],(0,r.useState)(e.includes("ACCENCCLO"))),h=(0,s.Z)(p,2),v=h[0],C=(h[1],(0,r.useState)(e.includes("ACCENCAPP"))),g=(0,s.Z)(C,2),j=g[0],w=(g[1],{canAdd:a,canEdit:o,canClone:v,canView:d,canActivate:x,canApprove:j});return(0,L.jsxs)(b.lG,{className:"h-full",bodyClass:"h-full",children:[(0,L.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,L.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Enterprise Customers"}),(0,L.jsx)(K,{actionPermissions:w})]}),(0,L.jsx)(M,{actionPermissions:w}),(0,L.jsx)(G,{})]})}}}]);
//# sourceMappingURL=329.cbe56ac8.chunk.js.map