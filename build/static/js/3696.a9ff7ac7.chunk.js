(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3696],{93696:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(29439),s=n(72791),r=n(87781),o=n(93433),i=n(95273),c=n(92546),l=(0,i.oM)({name:"CustomerCategoryList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(!a.selectedRows.includes(n))return{selectedRows:[].concat((0,o.Z)(a.selectedRows),(0,o.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(a.selectedRows.includes(n))return{selectedRows:a.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=l.actions,d=u.setSelectedRows,f=(u.setSelectedRow,u.addRowItem),x=u.removeRowItem,m=(u.toggleDeleteConfirmation,u.setDeleteMode,l.reducer),p=n(99025),v=(0,r.UY)({state:m,data:p.ZP}),h=n(69564),C=n(7869),g=n(58617),b=n(11087),y=n(50662),T=n(16030),w=n(48573),j=n.n(w),_=n(58121),I=n.n(_),N=n(80184),A=function(){var e=(0,T.I0)(),t=(0,s.useRef)(),n=(0,T.v9)((function(e){return e.TaxComponentList.data.tableData})),a=(0,T.v9)((function(e){return e.auth.user})),r=a.enterAccount,o=(a.password,a.rememberMe,a.usernameOrEmail,j()((function(e){var t=I()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.unq_id=r,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&i(t);"string"===typeof e&&0===e.length&&i(t)}),500));var i=function(t){e((0,p.N3)(t)),e((0,p.gB)(t))};return(0,N.jsx)(y.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,N.jsx)(g.O6C,{className:"text-lg"}),onChange:function(e){o(e.target.value)}})},k=function(e){var t=e.actionPermissions.canAdd;return(0,N.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,N.jsx)(A,{}),(0,N.jsx)(b.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,N.jsx)(y.zx,{block:!0,size:"sm",icon:(0,N.jsx)(g.H_7,{}),children:"Export"})}),(0,N.jsx)(b.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/new-TaxComponent",children:(0,N.jsxs)(y.zx,{block:!0,variant:"solid",disabled:!t,style:{fontStyle:"normal"},className:"flex justify-center pt-[6px] gap-1",size:"sm",children:[(0,N.jsx)("p",{className:"pt-[2px]",children:(0,N.jsx)(g.yEd,{})}),"Add Tax Component"]})})]})},S=n(74165),E=n(4942),D=n(15861),V=(n(30948),n(23532)),Z=n(57689),R=(n(97892),n(16856)),M=n(17425),z=n(39126),L=n(36232),F=n(54110),q=n(53540),P={ACTIVE:{label:"Active",dotClass:"bg-black-500",textClass:"text-black-500",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500",backgroundColor:"bg- #F5F5F5"}},B=function(e){var t=e.actionPermissions,n=(0,s.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],c=(0,s.useState)(""),l=(0,a.Z)(c,2),u=l[0],m=l[1],v=(0,s.useRef)(null),h=(0,T.I0)(),b=function(e){var n=e.row,a=((0,T.I0)(),(0,V.Z)().textTheme),r=(0,Z.s0)(),o=((0,s.useCallback)((function(){r("/app/sales/Item-details/".concat(n.id))}),[r,n]),"ACTIVE"!==n.md_tax_status?"green":"rose"),c="ACTIVE"!==n.md_tax_status?M.vUq:M.qGf,l={color:"grey",pointerEvents:"none"},u=(t.canAdd,t.canEdit),d=t.canView,f=t.canActivate;t.canClone,t.canApprove;return(0,N.jsxs)("div",{className:"text-lg",children:[(0,N.jsx)(y.u,{title:"Edit",children:(0,N.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(a),onClick:function(){r("/new-TaxComponent",{state:{data:n,mode:"EDIT"}})},style:u?null:l,children:(0,N.jsx)(R.U$P,{})})}),(0,N.jsx)(y.u,{title:"View",children:(0,N.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(a),style:d?null:l,children:(0,N.jsx)(g.Vvo,{})})}),(0,N.jsx)(y.u,{title:"".concat("ACTIVE"!==n.md_tax_status?"Activate":"Deactivate"),children:(0,N.jsx)("span",{className:"cursor-pointer p-1 text-".concat(o,"-800 hover:text-").concat(o,"-800"),onClick:function(){i(!0),m(n)},style:f?null:l,children:(0,N.jsx)(c,{})})})]})},w=(0,T.v9)((function(e){return e.TaxComponentList.data.tableData})),j=w.pageIndex,_=w.pageSize,A=w.sort,k=w.query,B=(w.total,w.sort_field),U=w.order,O=(0,T.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})).unq_id,X=(0,T.v9)((function(e){return e.TaxComponentList.data.loading})),K=(0,T.v9)((function(e){return e.TaxComponentList.data.taxCompList.res})),$=(0,T.v9)((function(e){return e.TaxComponentList.data.taxCompList.total})),G=((0,T.v9)((function(e){var t,n;return null===(t=e.doctypeList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.parentAccountList})),(0,s.useCallback)((function(){h((0,p.kk)())}),[]));(0,s.useEffect)((function(){var e=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){var t;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h((0,p.gB)((t={page_no:j-1,page_size:_,sort_field:"taxValue",unqId:O},(0,E.Z)(t,"sort_field",B||"id"),(0,E.Z)(t,"order",U),t)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[h,G,j,_,A,o,B,U]),(0,s.useEffect)((function(){var e;v&&(null===(e=v.current)||void 0===e||e.resetSelected())}),[K]);var H=(0,s.useMemo)((function(){return{pageIndex:j,pageSize:_,sort:A,query:k,total:$}}),[j,_,A,k,$]),W=(0,s.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(e){return(0,N.jsx)(b,{row:e.row.original})}},{header:"Operator",accessorKey:"acc_name"},{header:"Title",accessorKey:"tax_comp_title"},{header:"Deduction Type",accessorKey:"tax_comp_ded_type"},{header:"Description",accessorKey:"tax_comp_desc",cell:function(e){var t=e.row.original.tax_comp_desc,n="string"===typeof t?t:String(t);return(0,N.jsx)("span",{children:(0,q.ZP)(n)})}},{header:"Current Status",accessorKey:"md_tax_status",cell:function(e){var t,n,a,s=e.row.original.md_tax_status;return(0,N.jsx)("div",{className:"flex items-center",children:(0,N.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=P[s])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=P[s])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===s&&(0,N.jsx)(M.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===s&&(0,N.jsx)(M.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===s&&(0,N.jsx)(z.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(a=P[s])||void 0===a?void 0:a.label]})})}}]}),[]),Y=(0,s.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),a=[];n.forEach((function(e){a.push(e.id)})),h(d(a))}else h(d([]))}),[h]),Q=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){var t,n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===u.md_tax_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,L.TA)(u.id,t);case 3:(n=e.sent).data.success&&"ACTIVE"===t?(i(!1),(0,F.By)("success","Activated successfully")):n.data.success&&"IN_ACTIVE"===t&&(i(!1),(0,F.By)("success","Deactivated successfully"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.wQ,{ref:v,columns:W,data:K,loading:X,pagingData:H,onPaginationChange:function(e){var t=I()(H);t.pageIndex=e,h((0,p.N3)(t))},onSelectChange:function(e){var t=I()(H);t.pageSize=Number(e),t.pageIndex=1,h((0,p.N3)(t))},onSort:function(e){var t=I()(H),n=(0,F.TD)(e.key);t.sort_field=n,t.order=e.order,h((0,p.N3)(t))},onCheckBoxChange:function(e,t){h(e?f([t.id]):x(t.id))},onIndeterminateCheckBoxChange:Y,selectable:!0}),(0,N.jsxs)(y.Vq,{isOpen:o,onClose:function(){return i(!1)},children:[(0,N.jsx)("h6",{style:{fontStyle:"normal",fontSize:"18px"},children:"ACTIVE"!==u.md_tax_status?"Activate":"Deactivate"}),(0,N.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,N.jsx)("p",{children:"ACTIVE"!==u.md_tax_status?"Are you sure you want to activate this tax component ?":"Are you sure you want to deactivate this tax component ?"}),(0,N.jsxs)("div",{className:"mt-6 text-end",children:[(0,N.jsx)(y.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return i(!1)},children:"No"}),(0,N.jsx)(y.zx,{variant:"solid",onClick:function(){return Q()},children:"Yes"})]})]})]})};(0,h.fn)("TaxComponentList",v);var U=function(){var e=(0,T.v9)((function(e){return e.auth.user})).permissionsList,t=(0,s.useState)(e.includes("MSDTXCADD")),n=(0,a.Z)(t,2),r=n[0],o=(n[1],(0,s.useState)(e.includes("MSDTXCEDI"))),i=(0,a.Z)(o,2),c=i[0],l=(i[1],(0,s.useState)(e.includes("MSDTXCVIE"))),u=(0,a.Z)(l,2),d=u[0],f=(u[1],(0,s.useState)(e.includes("MSDTXCDEA"))),x=(0,a.Z)(f,2),m=x[0],p=(x[1],(0,s.useState)(e.includes("MSDTXCCLO"))),v=(0,a.Z)(p,2),h=v[0],g=(v[1],(0,s.useState)(e.includes("MSDTXCAPP"))),b=(0,a.Z)(g,2),y=b[0],w=(b[1],{canAdd:r,canEdit:c,canClone:h,canView:d,canActivate:m,canApprove:y});return(0,N.jsxs)(C.lG,{className:"h-full",bodyClass:"h-full",children:[(0,N.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,N.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Tax Component"}),(0,N.jsx)(k,{actionPermissions:w})]}),(0,N.jsx)(B,{actionPermissions:w})]})}},20821:function(e,t,n){var a=n(26050),s=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(s,""):e}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48573:function(e,t,n){var a=n(8092),s=n(50072),r=n(42582),o=Math.max,i=Math.min;e.exports=function(e,t,n){var c,l,u,d,f,x,m=0,p=!1,v=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function C(t){var n=c,a=l;return c=l=void 0,m=t,d=e.apply(a,n)}function g(e){return m=e,f=setTimeout(y,t),p?C(e):d}function b(e){var n=e-x;return void 0===x||n>=t||n<0||v&&e-m>=u}function y(){var e=s();if(b(e))return T(e);f=setTimeout(y,function(e){var n=t-(e-x);return v?i(n,u-(e-m)):n}(e))}function T(e){return f=void 0,h&&c?C(e):(c=l=void 0,d)}function w(){var e=s(),n=b(e);if(c=arguments,l=this,x=e,n){if(void 0===f)return g(x);if(v)return clearTimeout(f),f=setTimeout(y,t),C(x)}return void 0===f&&(f=setTimeout(y,t)),d}return t=r(t)||0,a(n)&&(p=!!n.leading,u=(v="maxWait"in n)?o(r(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==f&&clearTimeout(f),m=0,c=x=l=f=void 0},w.flush=function(){return void 0===f?d:T(s())},w}},50072:function(e,t,n){var a=n(97009);e.exports=function(){return a.Date.now()}},42582:function(e,t,n){var a=n(20821),s=n(8092),r=n(70152),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=3696.a9ff7ac7.chunk.js.map