(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[5312],{45312:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(29439),s=n(72791),a=n(87781),o=n(93433),i=n(95273),c=n(92546),u=(0,i.oM)({name:"CustomerCategoryList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,r=(0,c.Vk)(e);if(!r.selectedRows.includes(n))return{selectedRows:[].concat((0,o.Z)(r.selectedRows),(0,o.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,r=(0,c.Vk)(e);if(r.selectedRows.includes(n))return{selectedRows:r.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),l=u.actions,d=l.setSelectedRows,f=(l.setSelectedRow,l.addRowItem),m=l.removeRowItem,v=(l.toggleDeleteConfirmation,l.setDeleteMode,u.reducer),x=n(2158),p=(0,a.UY)({state:v,data:x.ZP}),C=n(69564),g=n(7869),h=n(58617),y=n(11087),b=n(50662),j=n(16030),w=n(48573),S=n.n(w),I=n(58121),N=n.n(I),_=n(80184),A=function(){var e=(0,j.I0)(),t=(0,s.useRef)(),n=(0,j.v9)((function(e){return e.CustomerCategoryList.data.tableData})),r=(0,j.v9)((function(e){return e.auth.user})),a=r.enterAccount,o=(r.password,r.rememberMe,r.usernameOrEmail,S()((function(e){var t=N()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.unq_id=a,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&i(t);"string"===typeof e&&0===e.length&&i(t)}),500));var i=function(t){e((0,x.N3)(t)),e((0,x.Sc)(t))};return(0,_.jsx)(b.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:(0,_.jsx)(h.O6C,{className:"text-lg"}),onChange:function(e){o(e.target.value)}})},T=function(e){var t=e.actionPermissions.canAdd;return(0,_.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,_.jsx)(A,{}),(0,_.jsx)(y.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,_.jsx)(b.zx,{block:!0,size:"sm",icon:(0,_.jsx)(h.H_7,{}),children:"Export"})}),(0,_.jsx)(y.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/new-CustomerCategory",children:(0,_.jsxs)(b.zx,{block:!0,variant:"solid",disabled:!t,style:{fontStyle:"normal"},className:"flex justify-center pt-[6px] gap-1",size:"sm",children:[(0,_.jsx)("p",{className:"pt-[2px]",children:(0,_.jsx)(h.yEd,{})}),"Add Customer Category"]})})]})},k=n(4942),E=n(74165),D=n(15861),V=(n(30948),n(23532)),R=n(57689),M=(n(97892),n(16856)),Z=n(17425),z=n(39126),O=n(55173),U=n(54110),F={ACTIVE:{label:"Active",dotClass:"bg-black-500",textClass:"text-black-500",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500",backgroundColor:"bg- #F5F5F5"}},L=function(e){var t=e.actionPermissions,n=(0,s.useState)(!1),a=(0,r.Z)(n,2),o=a[0],i=a[1],c=(0,s.useRef)(null),u=(0,s.useState)(""),l=(0,r.Z)(u,2),v=l[0],p=l[1],C=(0,j.I0)(),y=(0,j.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})).unq_id,w=function(e){var n=e.row,r=((0,j.I0)(),(0,V.Z)().textTheme),s=(0,R.s0)(),a="ACTIVE"!=n.md_cus_status?"green":"rose",o="ACTIVE"!=n.md_cus_status?Z.vUq:Z.qGf,c={color:"grey",pointerEvents:"none"},u=(t.canAdd,t.canEdit),l=t.canView,d=t.canActivate;t.canClone,t.canApprove;return(0,_.jsxs)("div",{className:"text-lg",children:[(0,_.jsx)(b.u,{title:"Edit",children:(0,_.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),onClick:function(){s("/new-CustomerCategory",{state:{data:n,mode:"EDIT"}})},style:u?null:c,children:(0,_.jsx)(M.U$P,{})})}),(0,_.jsx)(b.u,{title:"View",children:(0,_.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(r),style:l?null:c,children:(0,_.jsx)(h.Vvo,{})})}),(0,_.jsx)(b.u,{title:"".concat("ACTIVE"!=n.md_cus_status?"Activate":"Deactivate"),children:(0,_.jsx)("span",{className:"cursor-pointer p-1 text-".concat(a,"-800 hover:text-").concat(a,"-800"),onClick:function(){i(!0),p(n)},style:d?null:c,children:(0,_.jsx)(o,{})})})]})},S=(0,j.v9)((function(e){return e.auth.user})),I=S.enterAccount,A=(S.password,S.rememberMe,S.usernameOrEmail,(0,j.v9)((function(e){return e.CustomerCategoryList.data.loading}))),T=(0,j.v9)((function(e){return e.CustomerCategoryList.data.custList})),L=(0,j.v9)((function(e){var t,n;return null===(t=e.CustomerCategoryList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.custAccountList})),q=(0,j.v9)((function(e){var t,n,r;return null===e||void 0===e||null===(t=e.CustomerCategoryList)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.tableData)||void 0===r?void 0:r.total})),P=(0,s.useCallback)((function(){}),[]),B=(0,j.v9)((function(e){return e.CustomerCategoryList.data.tableData})),K=B.pageIndex,$=B.pageSize,G=B.sort,J=B.query,H=B.total,W=B.sort_field,Y=B.order;(0,s.useEffect)((function(){C(d([]));var e=function(){var e=(0,D.Z)((0,E.Z)().mark((function e(){return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C((0,x.Sc)({page_no:K-1,page_size:$,sort_field:W||"id",unqId:y,order:Y}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C,P,K,$,G,o,I,W]),(0,s.useEffect)((function(){var e;c&&(null===(e=c.current)||void 0===e||e.resetSelected())}),[T]);var Q=(0,s.useMemo)((function(){return{pageIndex:K,pageSize:$,sort:G,query:J,total:q}}),[K,$,G,J,H]),X=function(){var e=(0,D.Z)((0,E.Z)().mark((function e(){var t,n;return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===v.md_cus_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,O.r9)(v.id,t);case 3:(n=e.sent).data.success&&"ACTIVE"===t?(i(!1),(0,U.By)("success","Activated  successfully")):n.data.success&&"IN_ACTIVE"===t&&(i(!1),(0,U.By)("success","Deactivated successfully"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=(0,s.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(e){return(0,_.jsx)(w,{row:e.row.original})}},{header:"Operator ",accessorKey:"acc_name"},{header:"Customer Category Title",accessorKey:"cust_cat_title"},{header:"Customer Type",accessorKey:"cust_cat_type",cell:function(e){var t=e.row.original.cust_cat_type,n=null===JSON||void 0===JSON?void 0:JSON.parse(t),r=null===Object||void 0===Object?void 0:Object.keys(n).filter((function(e){return n[e]}));return(0,_.jsx)("span",{children:r.join(", ")})}},{header:"Status",accessorKey:"md_cus_status",flex:1,cell:function(e){var t,n,r,s=e.row.original.md_cus_status;return(0,_.jsx)("div",{className:"flex items-center",children:(0,_.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=F[s])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=F[s])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===s&&(0,_.jsx)(Z.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===s&&(0,_.jsx)(Z.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===s&&(0,_.jsx)(z.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(r=F[s])||void 0===r?void 0:r.label]})})}}]}),[L]),te=(0,s.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),r=[];n.forEach((function(e){r.push(e.id)})),C(d(r))}else C(d([]))}),[C]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.wQ,{ref:c,columns:ee,data:T,loading:A,pagingData:Q,onPaginationChange:function(e){var t=N()(Q);t.pageIndex=e,C((0,x.N3)(t))},onSelectChange:function(e){var t=N()(Q);t.pageSize=Number(e),t.pageIndex=1,C((0,x.N3)(t))},onSort:function(e){var t=N()(Q),n=(0,U.TD)(e.key);t.sort_field=n,t.order=e.order,C((0,x.N3)(t))},onCheckBoxChange:function(e,t){C(e?f([t.id]):m(t.id))},onIndeterminateCheckBoxChange:te,selectable:!0}),(0,_.jsxs)(b.Vq,{isOpen:o,onClose:function(){return i(!1)},children:[(0,_.jsx)("h6",{style:(0,k.Z)({fontStyle:"normal",fontSize:700},"fontSize","18px"),children:"ACTIVE"!=v.md_cus_status?"Activate":"Deactivate"}),(0,_.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,_.jsx)("p",{children:"ACTIVE"!=v.md_cus_status?"Are you sure you want to activate this customer category ?":"Are you sure you want to deactivate this customer category ?"}),(0,_.jsxs)("div",{className:"mt-6 text-end",children:[(0,_.jsx)(b.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return i(!1)},children:"No"}),(0,_.jsx)(b.zx,{variant:"solid",onClick:function(){return X()},children:"Yes"})]})]})]})};(0,C.fn)("CustomerCategoryList",p);var q=function(){var e=(0,j.v9)((function(e){return e.auth.user})).permissionsList,t=(0,s.useState)(e.includes("MSDCUSTCADD")),n=(0,r.Z)(t,2),a=n[0],o=(n[1],(0,s.useState)(e.includes("MSDCUSTCEDI"))),i=(0,r.Z)(o,2),c=i[0],u=(i[1],(0,s.useState)(e.includes("MSDCUSTCVIE"))),l=(0,r.Z)(u,2),d=l[0],f=(l[1],(0,s.useState)(e.includes("MSDCUSTCDEA"))),m=(0,r.Z)(f,2),v=m[0],x=(m[1],(0,s.useState)(e.includes("MSDCUSTCCLO"))),p=(0,r.Z)(x,2),C=p[0],h=(p[1],(0,s.useState)(e.includes("MSDCUSTCAPP"))),y=(0,r.Z)(h,2),b=y[0],w=(y[1],{canAdd:a,canEdit:c,canClone:C,canView:d,canActivate:v,canApprove:b});return(0,_.jsxs)(g.lG,{className:"h-full",bodyClass:"h-full",children:[(0,_.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,_.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Customer Category"}),(0,_.jsx)(T,{actionPermissions:w})]}),(0,_.jsx)(L,{actionPermissions:w})]})}},20821:function(e,t,n){var r=n(26050),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48573:function(e,t,n){var r=n(8092),s=n(50072),a=n(42582),o=Math.max,i=Math.min;e.exports=function(e,t,n){var c,u,l,d,f,m,v=0,x=!1,p=!1,C=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=c,r=u;return c=u=void 0,v=t,d=e.apply(r,n)}function h(e){return v=e,f=setTimeout(b,t),x?g(e):d}function y(e){var n=e-m;return void 0===m||n>=t||n<0||p&&e-v>=l}function b(){var e=s();if(y(e))return j(e);f=setTimeout(b,function(e){var n=t-(e-m);return p?i(n,l-(e-v)):n}(e))}function j(e){return f=void 0,C&&c?g(e):(c=u=void 0,d)}function w(){var e=s(),n=y(e);if(c=arguments,u=this,m=e,n){if(void 0===f)return h(m);if(p)return clearTimeout(f),f=setTimeout(b,t),g(m)}return void 0===f&&(f=setTimeout(b,t)),d}return t=a(t)||0,r(n)&&(x=!!n.leading,l=(p="maxWait"in n)?o(a(n.maxWait)||0,t):l,C="trailing"in n?!!n.trailing:C),w.cancel=function(){void 0!==f&&clearTimeout(f),v=0,c=m=u=f=void 0},w.flush=function(){return void 0===f?d:j(s())},w}},50072:function(e,t,n){var r=n(97009);e.exports=function(){return r.Date.now()}},42582:function(e,t,n){var r=n(20821),s=n(8092),a=n(70152),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=i.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=5312.92431351.chunk.js.map