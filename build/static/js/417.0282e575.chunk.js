(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[417],{50417:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var a=n(29439),s=n(72791),i=n(87781),r=n(93433),o=n(95273),c=n(92546),l=(0,o.oM)({name:"notificationsList/state",initialState:{selectedRows:[],selectedRow:[],deleteMode:""},reducers:{setSelectedRows:function(e,t){e.selectedRows=t.payload},setSelectedRow:function(e,t){e.selectedRow=t.payload},addRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(!a.selectedRows.includes(n))return{selectedRows:[].concat((0,r.Z)(a.selectedRows),(0,r.Z)(n))}},removeRowItem:function(e,t){var n=t.payload,a=(0,c.Vk)(e);if(a.selectedRows.includes(n))return{selectedRows:a.selectedRows.filter((function(e){return e!==n}))}},setDeleteMode:function(e,t){e.deleteMode=t.payload}}}),u=l.actions,d=u.setSelectedRows,f=(u.setSelectedRow,u.addRowItem),m=u.removeRowItem,v=(u.toggleDeleteConfirmation,u.setDeleteMode,l.reducer),x=n(71469),p=(0,i.UY)({state:v,data:x.ZP}),h=n(69564),g=n(7869),b=n(58617),C=n(11087),j=n(50662),y=n(16030),N=n(48573),T=n.n(N),w=n(58121),I=n.n(w),E=n(80184),S=function(){var e=(0,y.I0)(),t=(0,s.useRef)(),n=(0,y.v9)((function(e){return e.notificationsList.data.tableData})),a=(0,y.v9)((function(e){return e.auth.user})),i=a.enterAccount,r=(a.password,a.rememberMe,a.usernameOrEmail,T()((function(e){var t=I()(n);t.page_no=n.pageIndex-1,t.page_size=n.pageSize,t.unq_id=i,t.sort_field=n.sort_field,"string"===typeof e&&e.length>1&&o(t);"string"===typeof e&&0===e.length&&o(t)}),500));var o=function(t){e((0,x.N3)(t)),e((0,x.Jq)(t))};return(0,E.jsx)(j.II,{ref:t,className:"lg:w-52",size:"sm",placeholder:"Search Notification",prefix:(0,E.jsx)(b.O6C,{className:"text-lg"}),onChange:function(e){r(e.target.value)}})},k=function(){return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(j.zx,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:(0,E.jsx)(b.Yv7,{}),onClick:function(){},children:"Filter"})})},A=function(e){var t=e.actionPermissions.canAdd;return(0,E.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[(0,E.jsx)(S,{}),(0,E.jsx)(k,{}),(0,E.jsx)(C.rU,{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",target:"_blank",download:!0,children:(0,E.jsx)(j.zx,{block:!0,size:"sm",icon:(0,E.jsx)(b.H_7,{}),children:"Export"})}),(0,E.jsx)(C.rU,{className:"block lg:inline-block md:mb-0 mb-4",to:"/settings-create-template",children:(0,E.jsxs)(j.zx,{block:!0,variant:"solid",style:{fontStyle:"normal",fontSize:"18px"},className:"flex justify-center pt-[6px] gap-1",size:"sm",disabled:!t,children:[(0,E.jsx)("p",{className:"pt-[2px]",children:(0,E.jsx)(b.yEd,{})}),"Create Template"]})})]})},_=n(4942),D=n(74165),R=n(15861),V=n(23532),Z=n(57689),z=n(16856),F=n(17425),q=n(84373),M=n(39126),O=n(75474),L=n(54110),P=n(53540),U={ACTIVE:{label:"Active",dotClass:"bg-black-500",textClass:"text-black-500",backgroundColor:"bg-[#F5F5F5]"},SUBMITTED:{label:"Submitted",dotClass:"bg-blue-500",textClass:"text-black-500",backgroundColor:"bg-[#F0F7FF]"},IN_ACTIVE:{label:"Inactive",dotClass:"bg-red-500",textClass:"text-red-500",backgroundColor:"bg- #F5F5F5"}},B=function(e){var t=e.actionPermissions,n=(0,s.useRef)(null),i=(0,s.useState)(""),r=(0,a.Z)(i,2),o=r[0],c=r[1],l=(0,s.useState)(!1),u=(0,a.Z)(l,2),v=u[0],p=u[1],h=(0,y.I0)(),b=(0,y.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.user})).unq_id,N=(0,y.v9)((function(e){return e.notificationsList.data.tableData})),T=N.pageIndex,w=N.pageSize,S=N.sort,k=N.query,A=N.total,B=N.sort_field,K=N.order,$=(0,y.v9)((function(e){return e.notificationsList.data.loading})),G=(0,y.v9)((function(e){var t,n;return null===(t=e.notificationsList)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.notificationList})),Y=(0,y.v9)((function(e){var t,n,a;return null===e||void 0===e||null===(t=e.notificationsList)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.tableData)||void 0===a?void 0:a.total})),H=(0,s.useCallback)((function(){}),[]);(0,s.useEffect)((function(){h(d([]));var e=function(){var e=(0,R.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h((0,x.Jq)({page_no:T-1,page_size:w,sort_field:B||"id",order:K,query:k,unqId:b}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[h,H,T,w,S,v,B,K]),(0,s.useEffect)((function(){var e;n&&(null===(e=n.current)||void 0===e||e.resetSelected())}),[G]);var J=(0,s.useMemo)((function(){return{pageIndex:T,pageSize:w,sort:S,query:k,total:Y}}),[T,w,S,k,A]),W=function(e){var n=e.row,a=((0,y.I0)(),(0,V.Z)().textTheme),i=(0,Z.s0)(),r=((0,s.useCallback)((function(){i("/app/sales/Item-details/".concat(n.id))}),[i,n]),"ACTIVE"!=n.ntf_status?"green":"rose"),o="ACTIVE"!=n.ntf_status?F.vUq:F.qGf,l={color:"grey",pointerEvents:"none"},u=(t.canAdd,t.canEdit),d=(t.canView,t.canActivate);t.canClone,t.canApprove;return(0,E.jsxs)("div",{className:"text-lg",children:[(0,E.jsx)(j.u,{title:"Edit",children:(0,E.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(a),onClick:function(){i("/settings-create-template",{state:{data:n,mode:"EDIT"}})},style:u?null:l,children:(0,E.jsx)(z.U$P,{})})}),(0,E.jsx)(j.u,{title:"".concat("ACTIVE"!=n.ntf_status?"Activate":"Deactivate"),children:(0,E.jsx)("span",{className:"cursor-pointer p-1 text-".concat(r,"-800 hover:text-").concat(r,"-800"),onClick:function(){p(!0),c(n)},style:d?null:l,children:(0,E.jsx)(o,{})})}),(0,E.jsx)(j.u,{title:"Send",children:(0,E.jsx)("span",{className:"cursor-pointer p-1 text-blue-500 hover:".concat(a),children:(0,E.jsx)(C.rU,{to:"/settings-menu-send-notifications",children:(0,E.jsx)(q.ghy,{})})})})]})},Q=function(){var e=(0,R.Z)((0,D.Z)().mark((function e(){var t,n;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ACTIVE"===o.ntf_status?"IN_ACTIVE":"ACTIVE",e.next=3,(0,O.P7)(o.id,t);case 3:(n=e.sent).data.success&&"ACTIVE"===t?(p(!1),(0,L.By)("success","Activated  successfully")):n.data.success&&"IN_ACTIVE"===t&&(p(!1),(0,L.By)("success","Deactivated successfully"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=(0,s.useMemo)((function(){return[{header:"Actions",id:"action",cell:function(e){return(0,E.jsx)(W,{row:e.row.original})}},{header:"Title",accessorKey:"ntf_tp_name"},{header:"Template",accessorKey:"ntf_tp_info",cell:function(e){var t,n,a=null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n.ntf_tp_info;return(0,E.jsx)("p",{children:(0,P.ZP)(a)})}},{header:"Type",accessorKey:"ntf_tp_type"},{header:"Status",accessorKey:"ntf_status",flex:1,cell:function(e){var t,n,a,s=e.row.original.ntf_status;return(0,E.jsx)("div",{className:"flex items-center",children:(0,E.jsxs)("span",{className:"flex ml-2 rtl:mr-2 capitalize font-semibold rounded-full border ".concat(null===(t=U[s])||void 0===t?void 0:t.backgroundColor," mt-4 px-2 py-1 text-").concat(null===(n=U[s])||void 0===n?void 0:n.dotClass),children:["ACTIVE"===s&&(0,E.jsx)(F.vUq,{className:"mt-1 mr-2 text-[#3B8C59]"}),"IN_ACTIVE"===s&&(0,E.jsx)(F.qGf,{className:"mt-1 mr-2 text-[#FF0000]"}),"SUBMITTED"===s&&(0,E.jsx)(M.LHN,{className:"mt-1 mr-2 text-blue-500"}),null===(a=U[s])||void 0===a?void 0:a.label]})})}}]}),[]),ee=(0,s.useCallback)((function(e,t){if(e){var n=t.map((function(e){return e.original})),a=[];n.forEach((function(e){a.push(e.id)})),h(d(a))}else h(d([]))}),[h]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(g.wQ,{ref:n,columns:X,data:G,loading:$,pagingData:J,onPaginationChange:function(e){var t=I()(J);t.pageIndex=e,h((0,x.N3)(t))},onSelectChange:function(e){var t=I()(J);t.pageSize=Number(e),t.pageIndex=1,h((0,x.N3)(t))},onSort:function(e){var t=I()(J),n=(0,L.TD)(e.key);t.sort_field=n,t.order=e.order,h((0,x.N3)(t))},onCheckBoxChange:function(e,t){h(e?f([t.id]):m(t.id))},onIndeterminateCheckBoxChange:ee,selectable:!0}),(0,E.jsxs)(j.Vq,{isOpen:v,onClose:function(){return p(!1)},children:[(0,E.jsx)("h6",{style:(0,_.Z)({fontStyle:"normal",fontSize:700},"fontSize","18px"),children:"ACTIVE"!=o.ntf_status?"Activate":"Deactivate"}),(0,E.jsx)("hr",{className:"text-gary-500 mt-4 mb-4"}),(0,E.jsx)("p",{children:"ACTIVE"!=o.ntf_status?"Are you sure you want to activate this account ?":"Are you sure you want to deactivate this account ?"}),(0,E.jsxs)("div",{className:"mt-6 text-end",children:[(0,E.jsx)(j.zx,{style:{backgroundColor:"#4D4D4D",color:"white"},className:"mr-3",onClick:function(){return p(!1)},children:"No"}),(0,E.jsx)(j.zx,{variant:"solid",onClick:function(){return Q()},children:"Yes"})]})]})]})};(0,h.fn)("notificationsList",p);var K=function(){var e=(0,y.v9)((function(e){return e.auth.user})).permissionsList,t=(0,s.useState)(e.includes("SETNOTADD")),n=(0,a.Z)(t,2),i=n[0],r=(n[1],(0,s.useState)(e.includes("SETNOTEDI"))),o=(0,a.Z)(r,2),c=o[0],l=(o[1],(0,s.useState)(e.includes("SETNOTVIE"))),u=(0,a.Z)(l,2),d=u[0],f=(u[1],(0,s.useState)(e.includes("SETNOTDEA"))),m=(0,a.Z)(f,2),v=m[0],x=(m[1],(0,s.useState)(e.includes("SETNOTCLO"))),p=(0,a.Z)(x,2),h=p[0],b=(p[1],(0,s.useState)(e.includes("SETNOTAPP"))),C=(0,a.Z)(b,2),j=C[0],N=(C[1],{canAdd:i,canEdit:c,canClone:h,canView:d,canActivate:v,canApprove:j});return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(g.lG,{className:"h-full",bodyClass:"h-full",children:[(0,E.jsxs)("div",{className:"lg:flex items-center mt-4 justify-between mb-4",children:[(0,E.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Notifications"}),(0,E.jsx)(A,{actionPermissions:N})]}),(0,E.jsx)(B,{actionPermissions:N})]})})}},20821:function(e,t,n){var a=n(26050),s=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(s,""):e}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48573:function(e,t,n){var a=n(8092),s=n(50072),i=n(42582),r=Math.max,o=Math.min;e.exports=function(e,t,n){var c,l,u,d,f,m,v=0,x=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=c,a=l;return c=l=void 0,v=t,d=e.apply(a,n)}function b(e){return v=e,f=setTimeout(j,t),x?g(e):d}function C(e){var n=e-m;return void 0===m||n>=t||n<0||p&&e-v>=u}function j(){var e=s();if(C(e))return y(e);f=setTimeout(j,function(e){var n=t-(e-m);return p?o(n,u-(e-v)):n}(e))}function y(e){return f=void 0,h&&c?g(e):(c=l=void 0,d)}function N(){var e=s(),n=C(e);if(c=arguments,l=this,m=e,n){if(void 0===f)return b(m);if(p)return clearTimeout(f),f=setTimeout(j,t),g(m)}return void 0===f&&(f=setTimeout(j,t)),d}return t=i(t)||0,a(n)&&(x=!!n.leading,u=(p="maxWait"in n)?r(i(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),N.cancel=function(){void 0!==f&&clearTimeout(f),v=0,c=m=l=f=void 0},N.flush=function(){return void 0===f?d:y(s())},N}},50072:function(e,t,n){var a=n(97009);e.exports=function(){return a.Date.now()}},42582:function(e,t,n){var a=n(20821),s=n(8092),i=n(70152),r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=o.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):r.test(e)?NaN:+e}}}]);
//# sourceMappingURL=417.0282e575.chunk.js.map